function $t(t){var r=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return t.indexOf(r)>-1&&(t=t.replace(r+"/","")),t}function Bt(t){return t===void 0&&(t=""),t==="<anonymous>"&&(t=""),t}function Vt(t){return t?window.location.href.indexOf(t)===0:!1}function Gt(t){return t.map(function(r){return r.functionName&&(r.functionName=zt(r.functionName)),r})}function zt(t){var r=t.split("/");return r.length>1?t=["Object",r[r.length-1]].join("."):t=r[0],t=t.replace(/.<$/gi,".<anonymous>"),t=t.replace(/^Anonymous function$/,"<anonymous>"),r=t.split("."),r.length>1?t=r[r.length-1]:t=r[0],t}function Xt(t){if(t.length===0)return!1;if(t.length===1){var r=t[0];return"lineNumber"in r}return!0}function Kt(t,r){var i=r.error,e=r.filename,n=r.lineno,a=r.colno,o=[];if(i)try{o=t.parse(i)}catch{}Xt(o)||(o=[{fileName:e,lineNumber:n,columnNumber:a}]);var s=Gt(o);return s.map(function(u){var f=u.fileName,d=u.lineNumber,c=u.columnNumber,v=u.functionName,l=v===void 0?"<anonymous>":v;if(!f&&!d)return{};if(!c&&!d)return{};var p=Bt(f),h=$t(p);return Vt(p)&&(h="(inline script)"),{abs_path:f,filename:h,function:l,lineno:d,colno:c}})}function Yt(t){return t.filter(function(r){var i=r.filename,e=r.lineno;return typeof i<"u"&&typeof e<"u"})}function Jt(t){var r=this.constructor;return this.then(function(i){return r.resolve(t()).then(function(){return i})},function(i){return r.resolve(t()).then(function(){return r.reject(i)})})}function Qt(t){var r=this;return new r(function(i,e){if(!(t&&typeof t.length<"u"))return e(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(n.length===0)return i([]);var a=n.length;function o(u,f){if(f&&(typeof f=="object"||typeof f=="function")){var d=f.then;if(typeof d=="function"){d.call(f,function(c){o(u,c)},function(c){n[u]={status:"rejected",reason:c},--a===0&&i(n)});return}}n[u]={status:"fulfilled",value:f},--a===0&&i(n)}for(var s=0;s<n.length;s++)o(s,n[s])})}function ot(t,r){this.name="AggregateError",this.errors=t,this.message=r||""}ot.prototype=Error.prototype;function Wt(t){var r=this;return new r(function(i,e){if(!(t&&typeof t.length<"u"))return e(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(t);if(n.length===0)return e();for(var a=[],o=0;o<n.length;o++)try{r.resolve(n[o]).then(i).catch(function(s){a.push(s),a.length===n.length&&e(new ot(a,"All promises were rejected"))})}catch(s){e(s)}})}var Zt=setTimeout;function st(t){return Boolean(t&&typeof t.length<"u")}function er(){}function tr(t,r){return function(){t.apply(r,arguments)}}function S(t){if(!(this instanceof S))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ct(t,this)}function ut(t,r){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(r);return}t._handled=!0,S._immediateFn(function(){var i=t._state===1?r.onFulfilled:r.onRejected;if(i===null){(t._state===1?ge:W)(r.promise,t._value);return}var e;try{e=i(t._value)}catch(n){W(r.promise,n);return}ge(r.promise,e)})}function ge(t,r){try{if(r===t)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var i=r.then;if(r instanceof S){t._state=3,t._value=r,me(t);return}else if(typeof i=="function"){ct(tr(i,r),t);return}}t._state=1,t._value=r,me(t)}catch(e){W(t,e)}}function W(t,r){t._state=2,t._value=r,me(t)}function me(t){t._state===2&&t._deferreds.length===0&&S._immediateFn(function(){t._handled||S._unhandledRejectionFn(t._value)});for(var r=0,i=t._deferreds.length;r<i;r++)ut(t,t._deferreds[r]);t._deferreds=null}function rr(t,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof r=="function"?r:null,this.promise=i}function ct(t,r){var i=!1;try{t(function(e){i||(i=!0,ge(r,e))},function(e){i||(i=!0,W(r,e))})}catch(e){if(i)return;i=!0,W(r,e)}}S.prototype.catch=function(t){return this.then(null,t)};S.prototype.then=function(t,r){var i=new this.constructor(er);return ut(this,new rr(t,r,i)),i};S.prototype.finally=Jt;S.all=function(t){return new S(function(r,i){if(!st(t))return i(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(t);if(e.length===0)return r([]);var n=e.length;function a(s,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var f=u.then;if(typeof f=="function"){f.call(u,function(d){a(s,d)},i);return}}e[s]=u,--n===0&&r(e)}catch(d){i(d)}}for(var o=0;o<e.length;o++)a(o,e[o])})};S.any=Wt;S.allSettled=Qt;S.resolve=function(t){return t&&typeof t=="object"&&t.constructor===S?t:new S(function(r){r(t)})};S.reject=function(t){return new S(function(r,i){i(t)})};S.race=function(t){return new S(function(r,i){if(!st(t))return i(new TypeError("Promise.race accepts an array"));for(var e=0,n=t.length;e<n;e++)S.resolve(t[e]).then(r,i)})};S._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){Zt(t,0)};S._unhandledRejectionFn=function(r){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};var se={};A?se=window:typeof self<"u"&&(se=self);var I="Promise"in se?se.Promise:S,ft=[].slice,A=typeof window<"u",N=A&&typeof performance<"u"?performance:{};function nr(){var t=new window.XMLHttpRequest;return"withCredentials"in t}var dt=[];for(var ie=0;ie<256;++ie)dt[ie]=(ie+256).toString(16).substr(1);function ir(t){for(var r=[],i=0;i<t.length;i++)r.push(dt[t[i]]);return r.join("")}var le=new Uint8Array(16);function ar(){return typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?crypto.getRandomValues(le):typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"?msCrypto.getRandomValues(le):le}function U(t){var r=ir(ar());return r.substr(0,t)}function or(t){var r="00",i="00",e="01";if(t&&t.traceId&&t.id&&t.parentId){var n=t.sampled?e:i,a=t.sampled?t.id:t.parentId;return r+"-"+t.traceId+"-"+a+"-"+n}}function sr(t){var r=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})$/.exec(t);if(r){var i=r[4],e=i!=="00";return{traceId:r[2],id:r[3],sampled:e}}}function ur(t){return/^[\da-f]{2}-[\da-f]{32}-[\da-f]{16}-[\da-f]{2}$/.test(t)&&t.slice(3,35)!=="00000000000000000000000000000000"&&t.slice(36,52)!=="0000000000000000"}function cr(t){var r=t.sampleRate;if(!(typeof r!="number"||String(r).length>256)){var i="es",e="=";return""+i+e+"s:"+r}}function Ue(t,r,i){typeof t.setRequestHeader=="function"?t.setRequestHeader(r,i):t.headers&&typeof t.headers.append=="function"?t.headers.append(r,i):t[r]=i}function ye(t,r){var i=!1;return typeof r=="string"?i=t===r:r&&typeof r.test=="function"?i=r.test(t):Array.isArray(r)&&r.forEach(function(e){i||(i=ye(t,e))}),i}function fr(){return A&&typeof Set=="function"&&typeof JSON.stringify=="function"&&N&&typeof N.now=="function"&&nr()}function vt(t,r,i){if(!(!i||!t)){var e=pt(t),n=typeof r;return r!=null&&n!=="boolean"&&n!=="number"&&(r=String(r)),i[e]=r,i}}function dr(t){t===void 0&&(t=[]);for(var r=[],i=", ",e=";",n=0;n<t.length;n++){var a=t[n],o=a.name,s=a.duration,u=a.description,f=o;u&&(f+=e+"desc="+u),s&&(f+=e+"dur="+s),r.push(f)}return r.join(i)}function lt(t){return t&&t.split("?")[0]}function pe(t){return t!==null&&typeof t=="object"}function vr(t){return typeof t=="function"}function Pe(t,r,i){for(var e=0,n=r.length;e<n;++e){var a=r[e];if(!(!pe(a)&&!vr(a)))for(var o=Object.keys(a),s=0,u=o.length;s<u;s++){var f=o[s],d=a[f];i&&pe(d)?(pe(t[f])||(t[f]=Array.isArray(d)?[]:{}),Pe(t[f],[d],!1)):t[f]=d}}return t}function lr(){if(typeof document<"u")for(var t=document.getElementsByTagName("script"),r=0,i=t.length;r<i;r++){var e=t[r];if(e.src.indexOf("elastic")>0)return e}}function pr(){if(typeof document<"u"){var t=document.currentScript;return t||lr()}}function P(t){return Pe(t,ft.call(arguments,1),!1)}function fe(t){return Pe(t,ft.call(arguments,1),!0)}function Se(t){return typeof t>"u"}function ue(){}function pt(t){return t.replace(/[.*"]/g,"_")}function ht(t,r){for(var i=null,e=0;e<t.length;e++){var n=t[e];r&&r(n.type)&&(!i||i._end<n._end)&&(i=n)}return i}function hr(t){return ht(t,function(r){return String(r).indexOf("external")===-1})}function gr(t){return ht(t,function(r){return String(r).indexOf("external")!==-1})}function mr(t){for(var r=t[0],i=1;i<t.length;i++){var e=t[i];r._start>e._start&&(r=e)}return r}function D(){return N.now()}function _e(t){return typeof t=="number"&&t>=0?t:D()}function gt(t,r){return Se(r)||Se(t)?null:parseInt(r-t)}function De(t){I.resolve().then(t)}function mt(){return typeof N.getEntriesByType=="function"}function qe(t){return typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.indexOf(t)>=0}function yr(){var t="_elastic_inspect_beacon_";if(sessionStorage.getItem(t)!=null)return!0;if(!window.URL||!window.URLSearchParams)return!1;try{var r=new URL(window.location.href),i=r.searchParams.has(t);return i&&sessionStorage.setItem(t,!0),i}catch{}return!1}function Sr(t,r){switch(r){case"http:":return t==="80";case"https:":return t==="443"}return!0}var _r=[["#","hash"],["?","query"],["/","path"],["@","auth",1],[NaN,"host",void 0,1]],Er=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,q=function(){function t(i){var e=this.extractProtocol(i||""),n=e.protocol,a=e.address,o=e.slashes,s=!n&&!o,u=this.getLocation(),f=_r.slice();a=a.replace("\\","/"),o||(f[2]=[NaN,"path"]);for(var d,c=0;c<f.length;c++){var v=f[c],l=v[0],p=v[1];if(typeof l=="string"){if(d=a.indexOf(l),~d){var h=v[2];if(h){var g=a.lastIndexOf(l);d=Math.max(d,g),this[p]=a.slice(0,d),a=a.slice(d+h)}else this[p]=a.slice(d),a=a.slice(0,d)}}else this[p]=a,a="";this[p]=this[p]||s&&v[3]&&u[p]||"",v[3]&&(this[p]=this[p].toLowerCase())}if(s&&this.path.charAt(0)!=="/"&&(this.path="/"+this.path),this.relative=s,this.protocol=n||u.protocol,this.hostname=this.host,this.port="",/:\d+$/.test(this.host)){var m=this.host.split(":"),y=m.pop(),E=m.join(":");Sr(y,this.protocol)?this.host=E:this.port=y,this.hostname=E}this.origin=this.protocol&&this.host&&this.protocol!=="file:"?this.protocol+"//"+this.host:"null",this.href=this.toString()}var r=t.prototype;return r.toString=function(){var e=this.protocol;if(e+="//",this.auth){var n="[REDACTED]",a=this.auth.split(":"),o=a[0]?n:"",s=a[1]?":"+n:"";e+=o+s+"@"}return e+=this.host,e+=this.path,e+=this.query,e+=this.hash,e},r.getLocation=function(){var e={};return A&&(e=window),e.location},r.extractProtocol=function(e){var n=Er.exec(e);return{protocol:n[1]?n[1].toLowerCase():"",slashes:!!n[2],address:n[3]}},t}();function Tr(t,r){r===void 0&&(r=2);for(var i=new q(t),e=i.query,n=i.path,a=n.substring(1).split("/"),o=":id",s="*",u=/\W|_/g,f=/[0-9]/g,d=/[a-z]/g,c=/[A-Z]/g,v=[],l=!1,p=0;p<a.length;p++){var h=a[p];if(l||p>r-1){h&&v.push(s);break}var g=(h.match(u)||[]).length;if(g>=2){v.push(o),l=!0;continue}var m=(h.match(f)||[]).length;if(m>3||h.length>3&&m/h.length>=.3){v.push(o),l=!0;continue}var y=(h.match(c)||[]).length,E=(h.match(d)||[]).length,w=E/h.length,V=y/h.length;if(h.length>5&&(V>.3&&V<.6||w>.3&&w<.6)){v.push(o),l=!0;continue}h&&v.push(h)}var de="/"+(v.length>=2?v.join("/"):v.join(""))+(e?"?{query}":"");return de}var F="schedule",O="invoke",$e="addEventListener",br=["link","css","script","img","xmlhttprequest","fetch","beacon","iframe"],wr=5e3,he=5*60*1e3,yt=1e3,R="page-load",Rr="route-change",St="custom",_t="user-interaction",Ee="http-request",Te="temporary",ae="Unknown",Be=[R,Rr,_t,Ee,St,Te],Nr="success",Or="failure",xr="unknown",Cr=60,Lr="transaction:start",Et="transaction:end",Tt="config:change",be="queue:flush",bt="queue:add_transaction",M="xmlhttprequest",H="fetch",j="history",wt="eventtarget",Rt="click",Nt="error",Ir=":before",Ot=":after",Ve="elastic_apm_config",Z="longtask",Ar="paint",Pr="measure",kr="navigation",Fr="resource",Mr="first-contentful-paint",xt="largest-contentful-paint",ke="first-input",we="layout-shift",z="errors",X="transactions",T="ConfigService",x="LoggingService",C="TransactionService",re="ApmServer",Ct="PerformanceMonitoring",Re="ErrorLogging",Fe=".truncated",b=1024,Hr=30*6e4,Lt=1e4,jr=["tags"];function Ur(t,r){if(t==null)return{};var i={},e=Object.keys(t),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(i[n]=t[n]);return i}var Dr=91,qr=93,$r="external",Br="resource",Vr="hard-navigation";function Gr(t,r){return t===""&&(t=r==="http:"?"80":r==="https:"?"443":""),t}function It(t){var r=t.transferSize,i=t.encodedBodySize,e=t.decodedBodySize,n=t.serverTiming,a={transfer_size:r,encoded_body_size:i,decoded_body_size:e},o=dr(n);return o&&(a.headers={"server-timing":o}),a}function Me(t){var r=t.port,i=t.protocol,e=t.hostname,n=Gr(r,i),a=e.charCodeAt(0)===Dr&&e.charCodeAt(e.length-1)===qr,o=e;return a&&(o=e.slice(1,-1)),{service:{resource:e+":"+n,name:"",type:""},address:o,port:Number(n)}}function zr(t){var r=t.entry,i=t.url,e=new q(i),n=Me(e);return{http:{url:i,response:It(r)},destination:n}}function Xr(t){var r=t.url,i=t.method,e=t.target,n=t.response,a=new q(r),o=Me(a),s={http:{method:i,url:a.href},destination:o},u;return e&&typeof e.status<"u"?u=e.status:n&&(u=n.status),s.http.status_code=u,s}function Kr(t){var r=t.url,i=new q(r),e=Me(i);return{destination:e}}function At(){return{page:{referer:document.referrer,url:location.href}}}function Yr(t,r){if(r){var i=t.type,e;switch(i){case $r:e=Xr(r);break;case Br:e=zr(r);break;case Vr:e=Kr(r);break}t.addContext(e)}}function Jr(t,r){var i=r===void 0?{}:r;i.tags;var e=Ur(i,jr),n=At(),a={};if(t.type===R&&mt()){var o=N.getEntriesByType(kr);o&&o.length>0&&(a={response:It(o[0])})}t.addContext(n,a,e)}var Qr={service:{name:[b,!0],version:!0,agent:{version:[b,!0]},environment:!0},labels:{"*":!0}},Ge={"*":!0,headers:{"*":!0}},Wr={address:[b],service:{"*":[b,!0]}},He={user:{id:!0,email:!0,username:!0},tags:{"*":!0},http:{response:Ge},destination:Wr,response:Ge},Zr={name:[b,!0],type:[b,!0],id:[b,!0],trace_id:[b,!0],parent_id:[b,!0],transaction_id:[b,!0],subtype:!0,action:!0,context:He},en={name:!0,parent_id:!0,type:[b,!0],id:[b,!0],trace_id:[b,!0],span_count:{started:[b,!0]},context:He},tn={id:[b,!0],trace_id:!0,transaction_id:!0,parent_id:!0,culprit:!0,exception:{type:!0},transaction:{type:!0},context:He};function rn(t,r,i,e){return r===void 0&&(r=b),i===void 0&&(i=!1),e===void 0&&(e="N/A"),i&&Pt(t)&&(t=e),typeof t=="string"?t.substring(0,r):t}function Pt(t){return t==null||t===""||typeof t>"u"}function ze(t,r,i){var e=rn(t[r],i[0],i[1]);if(Pt(e)){delete t[r];return}t[r]=e}function ee(t,r,i){t===void 0&&(t={}),i===void 0&&(i=r);for(var e=Object.keys(t),n=[],a=function(u){var f=e[u],d=t[f]===!0?n:t[f];Array.isArray(d)?f==="*"?Object.keys(i).forEach(function(c){return ze(i,c,d)}):ze(i,f,d):ee(d,r,i[f])},o=0;o<e.length;o++)a(o);return r}var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne={},nn={get exports(){return Ne},set exports(t){Ne=t}},ce={},an={get exports(){return ce},set exports(t){ce=t}},Xe;function on(){return Xe||(Xe=1,function(t,r){(function(i,e){t.exports=e()})(kt,function(){function i(n){return!isNaN(parseFloat(n))&&isFinite(n)}function e(n,a,o,s,u,f){n!==void 0&&this.setFunctionName(n),a!==void 0&&this.setArgs(a),o!==void 0&&this.setFileName(o),s!==void 0&&this.setLineNumber(s),u!==void 0&&this.setColumnNumber(u),f!==void 0&&this.setSource(f)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(n){this.functionName=String(n)},getArgs:function(){return this.args},setArgs:function(n){if(Object.prototype.toString.call(n)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=n},getFileName:function(){return this.fileName},setFileName:function(n){this.fileName=String(n)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(n){if(!i(n))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(n)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(n){if(!i(n))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(n)},getSource:function(){return this.source},setSource:function(n){this.source=String(n)},toString:function(){var n=this.getFunctionName()||"{anonymous}",a="("+(this.getArgs()||[]).join(",")+")",o=this.getFileName()?"@"+this.getFileName():"",s=i(this.getLineNumber())?":"+this.getLineNumber():"",u=i(this.getColumnNumber())?":"+this.getColumnNumber():"";return n+a+o+s+u}},e})}(an)),ce}(function(t,r){(function(i,e){t.exports=e(on())})(kt,function(e){var n=/(^|@)\S+\:\d+/,a=/^\s*at .*(\S+\:\d+|\(native\))/m,o=/^(eval@)?(\[native code\])?$/;function s(d,c,v){if(typeof Array.prototype.map=="function")return d.map(c,v);for(var l=new Array(d.length),p=0;p<d.length;p++)l[p]=c.call(v,d[p]);return l}function u(d,c,v){if(typeof Array.prototype.filter=="function")return d.filter(c,v);for(var l=[],p=0;p<d.length;p++)c.call(v,d[p])&&l.push(d[p]);return l}function f(d,c){if(typeof Array.prototype.indexOf=="function")return d.indexOf(c);for(var v=0;v<d.length;v++)if(d[v]===c)return v;return-1}return{parse:function(c){if(typeof c.stacktrace<"u"||typeof c["opera#sourceloc"]<"u")return this.parseOpera(c);if(c.stack&&c.stack.match(a))return this.parseV8OrIE(c);if(c.stack)return this.parseFFOrSafari(c);throw new Error("Cannot parse given Error object")},extractLocation:function(c){if(c.indexOf(":")===-1)return[c];var v=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,l=v.exec(c.replace(/[\(\)]/g,""));return[l[1],l[2]||void 0,l[3]||void 0]},parseV8OrIE:function(c){var v=u(c.stack.split(`
`),function(l){return!!l.match(a)},this);return s(v,function(l){l.indexOf("(eval ")>-1&&(l=l.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var p=l.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),h=this.extractLocation(p.pop()),g=p.join(" ")||void 0,m=f(["eval","<anonymous>"],h[0])>-1?void 0:h[0];return new e(g,void 0,m,h[1],h[2],l)},this)},parseFFOrSafari:function(c){var v=u(c.stack.split(`
`),function(l){return!l.match(o)},this);return s(v,function(l){if(l.indexOf(" > eval")>-1&&(l=l.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),l.indexOf("@")===-1&&l.indexOf(":")===-1)return new e(l);var p=l.split("@"),h=this.extractLocation(p.pop()),g=p.join("@")||void 0;return new e(g,void 0,h[0],h[1],h[2],l)},this)},parseOpera:function(c){return!c.stacktrace||c.message.indexOf(`
`)>-1&&c.message.split(`
`).length>c.stacktrace.split(`
`).length?this.parseOpera9(c):c.stack?this.parseOpera11(c):this.parseOpera10(c)},parseOpera9:function(c){for(var v=/Line (\d+).*script (?:in )?(\S+)/i,l=c.message.split(`
`),p=[],h=2,g=l.length;h<g;h+=2){var m=v.exec(l[h]);m&&p.push(new e(void 0,void 0,m[2],m[1],void 0,l[h]))}return p},parseOpera10:function(c){for(var v=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,l=c.stacktrace.split(`
`),p=[],h=0,g=l.length;h<g;h+=2){var m=v.exec(l[h]);m&&p.push(new e(m[3]||void 0,void 0,m[2],m[1],void 0,l[h]))}return p},parseOpera11:function(c){var v=u(c.stack.split(`
`),function(l){return!!l.match(n)&&!l.match(/^Error created at/)},this);return s(v,function(l){var p=l.split("@"),h=this.extractLocation(p.pop()),g=p.shift()||"",m=g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,y;g.match(/\(([^\)]*)\)/)&&(y=g.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var E=y===void 0||y==="[arguments not available]"?void 0:y.split(",");return new e(m,E,h[0],h[1],h[2],l)},this)}}})})(nn);const sn=Ne;var un=["tags"];function cn(t,r){if(t==null)return{};var i={},e=Object.keys(t),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(i[n]=t[n]);return i}var fn=["stack","message"];function dn(t){var r=!1,i={};if(Object.keys(t).forEach(function(e){if(!(fn.indexOf(e)>=0)){var n=t[e];if(!(n==null||typeof n=="function")){if(typeof n=="object"){if(typeof n.toISOString!="function")return;n=n.toISOString()}i[e]=n,r=!0}}}),r)return i}var vn=function(){function t(i,e,n){this._apmServer=i,this._configService=e,this._transactionService=n}var r=t.prototype;return r.createErrorDataModel=function(e){var n=Kt(sn,e),a=Yt(n),o="(inline script)",s=a[a.length-1];s&&s.filename&&(o=s.filename);var u=e.message,f=e.error,d=u,c="",v={};if(f&&typeof f=="object"){d=d||f.message,c=f.name;var l=dn(f);l&&(v.custom=l)}c||d&&d.indexOf(":")>-1&&(c=d.split(":")[0]);var p=this._transactionService.getCurrentTransaction(),h=p?p.context:{},g=this._configService.get("context");g.tags;var m=cn(g,un),y=At(),E=fe({},y,h,m,v),w={id:U(),culprit:o,exception:{message:d,stacktrace:a,type:c},context:E};return p&&(w=P(w,{trace_id:p.traceId,parent_id:p.id,transaction_id:p.id,transaction:{type:p.type,sampled:p.sampled}})),ee(tn,w)},r.logErrorEvent=function(e){if(!(typeof e>"u")){var n=this.createErrorDataModel(e);typeof n.exception.message>"u"||this._apmServer.addError(n)}},r.registerListeners=function(){var e=this;window.addEventListener("error",function(n){return e.logErrorEvent(n)}),window.addEventListener("unhandledrejection",function(n){return e.logPromiseEvent(n)})},r.logPromiseEvent=function(e){var n="Unhandled promise rejection: ",a=e.reason;a==null&&(a="<no reason specified>");var o;if(typeof a.message=="string"){var s=a.name?a.name+": ":"";o={error:a,message:n+s+a.message}}else a=typeof a=="object"?"<object>":typeof a=="function"?"<function>":a,o={message:n+a};this.logErrorEvent(o)},r.logError=function(e){var n={};return typeof e=="string"?n.message=e:n.error=e,this.logErrorEvent(n)},t}();const ln=vn;var pn=function(){function t(i,e){e===void 0&&(e={}),this.onFlush=i,this.items=[],this.queueLimit=e.queueLimit||-1,this.flushInterval=e.flushInterval||0,this.timeoutId=void 0}var r=t.prototype;return r._setTimer=function(){var e=this;this.timeoutId=setTimeout(function(){return e.flush()},this.flushInterval)},r._clear=function(){typeof this.timeoutId<"u"&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]},r.flush=function(){this.onFlush(this.items),this._clear()},r.add=function(e){this.items.push(e),this.queueLimit!==-1&&this.items.length>=this.queueLimit?this.flush():typeof this.timeoutId>"u"&&this._setTimer()},t}();const hn=pn;function gn(t,r,i){var e=this,n=i.limit,a=i.interval,o=0,s;return function(){return o++,typeof s>"u"&&(s=setTimeout(function(){o=0,s=void 0},a)),o>n&&typeof r=="function"?r.apply(e,arguments):t.apply(e,arguments)}}var mn=function(){function t(){}return t.stringify=function(i){return JSON.stringify(i)+`
`},t}();const K=mn;var yn=function(){function t(i,e,n){n===void 0&&(n={}),i||(i=ae),e||(e=St),this.name=i,this.type=e,this.options=n,this.id=n.id||U(16),this.traceId=n.traceId,this.sampled=n.sampled,this.sampleRate=n.sampleRate,this.timestamp=n.timestamp,this._start=_e(n.startTime),this._end=void 0,this.ended=!1,this.outcome=void 0,this.onEnd=n.onEnd}var r=t.prototype;return r.ensureContext=function(){this.context||(this.context={})},r.addLabels=function(e){this.ensureContext();var n=this.context;n.tags||(n.tags={});var a=Object.keys(e);a.forEach(function(o){return vt(o,e[o],n.tags)})},r.addContext=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];n.length!==0&&(this.ensureContext(),fe.apply(void 0,[this.context].concat(n)))},r.end=function(e){this.ended||(this.ended=!0,this._end=_e(e),this.callOnEnd())},r.callOnEnd=function(){typeof this.onEnd=="function"&&this.onEnd(this)},r.duration=function(){return gt(this._start,this._end)},t}();const Ft=yn;function Sn(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,Oe(t,r)}function Oe(t,r){return Oe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},Oe(t,r)}var _n=function(t){Sn(r,t);function r(e,n,a){var o;if(o=t.call(this,e,n,a)||this,o.parentId=o.options.parentId,o.subtype=void 0,o.action=void 0,o.type.indexOf(".")!==-1){var s=o.type.split(".",3);o.type=s[0],o.subtype=s[1],o.action=s[2]}return o.sync=o.options.sync,o}var i=r.prototype;return i.end=function(n,a){t.prototype.end.call(this,n),Yr(this,a)},r}(Ft);const k=_n;var $={bootstrapTime:null,lastHiddenStart:Number.MIN_SAFE_INTEGER},Y=[["domainLookupStart","domainLookupEnd","Domain lookup"],["connectStart","connectEnd","Making a connection to the server"],["requestStart","responseEnd","Requesting and receiving the document"],["domLoading","domInteractive","Parsing the document, executing sync. scripts"],["domContentLoadedEventStart","domContentLoadedEventEnd",'Fire "DOMContentLoaded" event'],["loadEventStart","loadEventEnd",'Fire "load" event']];function je(t,r,i,e,n){return n===void 0&&(n=0),typeof t=="number"&&typeof r=="number"&&t>=n&&r>t&&t-n>=i&&r-n<=e&&r-t<he&&t-n<he&&r-n<he}function En(t,r,i,e){for(var n=[],a=0;a<Y.length;a++){var o=t[Y[a][0]],s=t[Y[a][1]];if(je(o,s,i,e,r)){var u=new k(Y[a][2],"hard-navigation.browser-timing"),f=null;Y[a][0]==="requestStart"&&(u.pageResponse=!0,f={url:location.origin}),u._start=o-r,u.end(s-r,f),n.push(u)}}return n}function Tn(t){var r=t.name,i=t.initiatorType,e=t.startTime,n=t.responseEnd,a="resource";i&&(a+="."+i);var o=lt(r),s=new k(o,a);return s._start=e,s.end(n,{url:r,entry:t}),s}function bn(t,r){return r!=null&&t>r}function wn(t){return/intake\/v\d+\/rum\/events/.test(t)}function Rn(t,r,i,e){for(var n=[],a=0;a<t.length;a++){var o=t[a],s=o.initiatorType,u=o.name,f=o.startTime,d=o.responseEnd;br.indexOf(s)===-1||u==null||(s==="xmlhttprequest"||s==="fetch")&&(wn(u)||bn(f,r))||je(f,d,i,e)&&n.push(Tn(t[a]))}return n}function Nn(t,r,i){for(var e=[],n=0;n<t.length;n++){var a=t[n],o=a.name,s=a.startTime,u=a.duration,f=s+u;if(!(u<=Cr||!je(s,f,r,i))){var d="app",c=new k(o,d);c._start=s,c.end(f),e.push(c)}}return e}var Mt=["fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],On=["fs","ls","le","cs","ce","qs","rs","re","dl","di","ds","de","dc","es","ee"];function xn(t){var r=t.fetchStart,i=t.navigationStart,e=t.responseStart,n=t.responseEnd;if(r>=i&&e>=r&&n>=e){var a={};return Mt.forEach(function(o){var s=t[o];s&&s>=r&&(a[o]=parseInt(s-r))}),a}return null}function Cn(t){var r=xn(t);return r==null?null:{navigationTiming:r,agent:{timeToFirstByte:r.responseStart,domInteractive:r.domInteractive,domComplete:r.domComplete}}}function Ln(t){if(t.captureTimings){var r=t._end;if(t.type===R){if(t.marks&&t.marks.custom){var i=t.marks.custom;Object.keys(i).forEach(function(u){i[u]+=t._start})}var e=0;t._start=e;var n=N.timing;En(n,n.fetchStart,e,r).forEach(function(u){u.traceId=t.traceId,u.sampled=t.sampled,u.pageResponse&&t.options.pageLoadSpanId&&(u.id=t.options.pageLoadSpanId),t.spans.push(u)}),t.addMarks(Cn(n))}if(mt()){var a=t._start,o=N.getEntriesByType(Fr);Rn(o,$.bootstrapTime,a,r).forEach(function(u){return t.spans.push(u)});var s=N.getEntriesByType(Pr);Nn(s,a,r).forEach(function(u){return t.spans.push(u)})}}}function In(t){return t.map(function(r){return{ap:r.abs_path,f:r.filename,fn:r.function,li:r.lineno,co:r.colno}})}function Ht(t){return{ts:t.transfer_size,ebs:t.encoded_body_size,dbs:t.decoded_body_size}}function An(t){var r={},i=t.method,e=t.status_code,n=t.url,a=t.response;return r.url=n,i&&(r.mt=i),e&&(r.sc=e),a&&(r.r=Ht(a)),r}function xe(t){if(!t)return null;var r={},i=t.page,e=t.http,n=t.response,a=t.destination,o=t.user,s=t.custom;if(i&&(r.p={rf:i.referer,url:i.url}),e&&(r.h=An(e)),n&&(r.r=Ht(n)),a){var u=a.service;r.dt={se:{n:u.name,t:u.type,rc:u.resource},ad:a.address,po:a.port}}return o&&(r.u={id:o.id,un:o.username,em:o.email}),s&&(r.cu=s),r}function Pn(t){if(!t)return null;var r=kn(t.navigationTiming),i={nt:r,a:Fn(r,t.agent)};return i}function kn(t){if(!t)return null;var r={};return On.forEach(function(i,e){var n=Mt[e];r[i]=t[n]}),r}function Fn(t,r){var i={};if(t&&(i={fb:t.rs,di:t.di,dc:t.dc}),r){var e=r.firstContentfulPaint,n=r.largestContentfulPaint;e&&(i.fp=e),n&&(i.lp=n)}return Object.keys(i).length===0?null:i}function Mn(t){var r=t.service,i=t.labels,e=r.agent,n=r.language;return{se:{n:r.name,ve:r.version,a:{n:e.name,ve:e.version},la:{n:n.name},en:r.environment},l:i}}function Hn(t){var r=t.spans.map(function(c){var v={id:c.id,n:c.name,t:c.type,s:c.start,d:c.duration,c:xe(c.context),o:c.outcome,sr:c.sample_rate};return c.parent_id!==t.id&&(v.pid=c.parent_id),c.sync===!0&&(v.sy=!0),c.subtype&&(v.su=c.subtype),c.action&&(v.ac=c.action),v}),i={id:t.id,tid:t.trace_id,n:t.name,t:t.type,d:t.duration,c:xe(t.context),k:Pn(t.marks),me:Un(t.breakdown),y:r,yc:{sd:r.length},sm:t.sampled,sr:t.sample_rate,o:t.outcome};if(t.experience){var e=t.experience,n=e.cls,a=e.fid,o=e.tbt,s=e.longtask;i.exp={cls:n,fid:a,tbt:o,lt:s}}if(t.session){var u=t.session,f=u.id,d=u.sequence;i.ses={id:f,seq:d}}return i}function jn(t){var r=t.exception,i={id:t.id,cl:t.culprit,ex:{mg:r.message,st:In(r.stacktrace),t:t.type},c:xe(t.context)},e=t.transaction;return e&&(i.tid=t.trace_id,i.pid=t.parent_id,i.xid=t.transaction_id,i.x={t:e.type,sm:e.sampled}),i}function Un(t){return t.map(function(r){var i=r.span,e=r.samples,n=i!=null;return n?{y:{t:i.type},sa:{ysc:{v:e["span.self_time.count"].value},yss:{v:e["span.self_time.sum.us"].value}}}:{sa:{xdc:{v:e["transaction.duration.count"].value},xds:{v:e["transaction.duration.sum.us"].value},xbc:{v:e["transaction.breakdown.count"].value}}}})}function Dn(t,r){r===void 0&&(r="gzip");var i=typeof CompressionStream=="function";return new I(function(e){if(!i||yr())return e(t);var n=t.payload,a=t.headers,o=t.beforeSend,s=new Blob([n]).stream(),u=s.pipeThrough(new CompressionStream(r));return new Response(u).blob().then(function(f){return a["Content-Encoding"]=r,e({payload:f,headers:a,beforeSend:o})})})}function jt(t){return!(t===0||t>399&&t<600)}function Ce(){return Ce=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},Ce.apply(this,arguments)}var qn=60*1e3;function $n(t,r){if(!Ut())return!1;var i="keepalive"in new Request("");if(!i)return!1;var e=Vn(r);return t==="POST"&&e<qn}function Bn(t,r,i){var e=i.keepalive,n=e===void 0?!1:e,a=i.timeout,o=a===void 0?Lt:a,s=i.payload,u=i.headers,f=i.sendCredentials,d={};if(typeof AbortController=="function"){var c=new AbortController;d.signal=c.signal,setTimeout(function(){return c.abort()},o)}var v;return window.fetch(r,Ce({body:s,headers:u,method:t,keepalive:n,credentials:f?"include":"omit"},d)).then(function(l){return v=l,v.text()}).then(function(l){var p={url:r,status:v.status,responseText:l};if(!jt(v.status))throw p;return p})}function Ut(){return typeof window.fetch=="function"&&typeof window.Request=="function"}function Vn(t){return t?t instanceof Blob?t.size:new Blob([t]).size:0}var oe={fetchInProgress:!1};function B(t){return"__apm_symbol__"+t}function Gn(t){return t?t.writable===!1?!1:!(typeof t.get=="function"&&typeof t.set>"u"):!0}function zn(t,r){t[B("OriginalDelegate")]=r}function Ke(t,r,i){for(var e=t;e&&!e.hasOwnProperty(r);)e=Object.getPrototypeOf(e);!e&&t[r]&&(e=t);var n=B(r),a;if(e&&!(a=e[n])){a=e[n]=e[r];var o=e&&Object.getOwnPropertyDescriptor(e,r);if(Gn(o)){var s=i(a,n,r);e[r]=function(){return s(this,arguments)},zn(e[r],a)}}return a}var Le=B("xhrIgnore"),Ye=B("xhrSync"),Je=B("xhrURL"),Qe=B("xhrMethod");function We(t,r,i){var e=i.timeout,n=e===void 0?HTTP_REQUEST_TIMEOUT:e,a=i.payload,o=i.headers,s=i.beforeSend,u=i.sendCredentials;return new I(function(f,d){var c=new window.XMLHttpRequest;if(c[Le]=!0,c.open(t,r,!0),c.timeout=n,c.withCredentials=u,o)for(var v in o)o.hasOwnProperty(v)&&c.setRequestHeader(v,o[v]);c.onreadystatechange=function(){if(c.readyState===4){var p=c.status,h=c.responseText;jt(p)?f(c):d({url:r,status:p,responseText:h})}},c.onerror=function(){var p=c.status,h=c.responseText;d({url:r,status:p,responseText:h})};var l=!0;typeof s=="function"&&(l=s({url:r,method:t,headers:o,payload:a,xhr:c})),l?c.send(a):d({url:r,status:0,responseText:"Request rejected by user configuration."})})}var Xn=6e4,Kn=function(){function t(i,e){this._configService=i,this._loggingService=e,this.queue=void 0,this.throttleEvents=ue}var r=t.prototype;return r.init=function(){var e=this,n=this._configService.get("queueLimit"),a=this._configService.get("flushInterval"),o=this._configService.get("eventsLimit"),s=function(f){var d=e.sendEvents(f);d&&d.catch(function(c){e._loggingService.warn("Failed sending events!",e._constructError(c))})};this.queue=new hn(s,{queueLimit:n,flushInterval:a}),this.throttleEvents=gn(this.queue.add.bind(this.queue),function(){return e._loggingService.warn("Dropped events due to throttling!")},{limit:o,interval:Xn}),this._configService.observeEvent(be,function(){e.queue.flush()})},r._postJson=function(e,n){var a=this,o={"Content-Type":"application/x-ndjson"},s=this._configService.get("apmRequest"),u={payload:n,headers:o,beforeSend:s};return Dn(u).catch(function(f){return u}).then(function(f){return a._makeHttpRequest("POST",e,f)}).then(function(f){var d=f.responseText;return d})},r._constructError=function(e){var n=e.url,a=e.status;if(e.responseText,typeof a>"u")return e;var o=n+" HTTP status: "+a;return new Error(o)},r._makeHttpRequest=function(e,n,a){var o=a===void 0?{}:a,s=o.timeout,u=s===void 0?Lt:s,f=o.payload,d=o.headers,c=o.beforeSend,v=this._configService.get("sendCredentials");return!c&&$n(e,f)?Bn(e,n,{keepalive:!0,timeout:u,payload:f,headers:d,sendCredentials:v}).catch(function(l){if(l instanceof TypeError)return We(e,n,{timeout:u,payload:f,headers:d,beforeSend:c,sendCredentials:v});throw l}):We(e,n,{timeout:u,payload:f,headers:d,beforeSend:c,sendCredentials:v})},r.fetchConfig=function(e,n){var a=this,o=this.getEndpoints(),s=o.configEndpoint;if(!e)return I.reject("serviceName is required for fetching central config.");s+="?service.name="+e,n&&(s+="&service.environment="+n);var u=this._configService.getLocalConfig();u&&(s+="&ifnonematch="+u.etag);var f=this._configService.get("apmRequest");return this._makeHttpRequest("GET",s,{timeout:5e3,beforeSend:f}).then(function(d){var c=d.status,v=d.responseText;if(c===304)return u;var l=JSON.parse(v),p=d.getResponseHeader("etag");return p&&(l.etag=p.replace(/["]/g,""),a._configService.setLocalConfig(l,!0)),l}).catch(function(d){var c=a._constructError(d);return I.reject(c)})},r.createMetaData=function(){var e=this._configService,n={service:{name:e.get("serviceName"),version:e.get("serviceVersion"),agent:{name:"rum-js",version:e.version},language:{name:"javascript"},environment:e.get("environment")},labels:e.get("context.tags")};return ee(Qr,n)},r.addError=function(e){var n;this.throttleEvents((n={},n[z]=e,n))},r.addTransaction=function(e){var n;this.throttleEvents((n={},n[X]=e,n))},r.ndjsonErrors=function(e,n){var a=n?"e":"error";return e.map(function(o){var s;return K.stringify((s={},s[a]=n?jn(o):o,s))})},r.ndjsonMetricsets=function(e){return e.map(function(n){return K.stringify({metricset:n})}).join("")},r.ndjsonTransactions=function(e,n){var a=this,o=n?"x":"transaction";return e.map(function(s){var u,f="",d="";return n||(s.spans&&(f=s.spans.map(function(c){return K.stringify({span:c})}).join(""),delete s.spans),s.breakdown&&(d=a.ndjsonMetricsets(s.breakdown),delete s.breakdown)),K.stringify((u={},u[o]=n?Hn(s):s,u))+f+d})},r.sendEvents=function(e){var n,a;if(e.length!==0){for(var o=[],s=[],u=0;u<e.length;u++){var f=e[u];f[X]&&o.push(f[X]),f[z]&&s.push(f[z])}if(!(o.length===0&&s.length===0)){var d=this._configService,c=(n={},n[X]=o,n[z]=s,n),v=d.applyFilters(c);if(!v){this._loggingService.warn("Dropped payload due to filtering!");return}var l=d.get("apiVersion"),p=l>2,h=[],g=this.createMetaData(),m=p?"m":"metadata";h.push(K.stringify((a={},a[m]=p?Mn(g):g,a))),h=h.concat(this.ndjsonErrors(v[z],p),this.ndjsonTransactions(v[X],p));var y=h.join(""),E=this.getEndpoints(),w=E.intakeEndpoint;return this._postJson(w,y)}}},r.getEndpoints=function(){var e=this._configService.get("serverUrl"),n=this._configService.get("apiVersion"),a=this._configService.get("serverUrlPrefix")||"/intake/v"+n+"/rum/events",o=e+a,s=e+"/config/v1/rum/agents";return{intakeEndpoint:o,configEndpoint:s}},t}();const Yn=Kn;var Jn=function(){function t(){this.observers={}}var r=t.prototype;return r.observe=function(e,n){var a=this;if(typeof n=="function")return this.observers[e]||(this.observers[e]=[]),this.observers[e].push(n),function(){var o=a.observers[e].indexOf(n);o>-1&&a.observers[e].splice(o,1)}},r.sendOnly=function(e,n){var a=this.observers[e];a&&a.forEach(function(o){try{o.apply(void 0,n)}catch(s){console.log(s,s.stack)}})},r.send=function(e,n){this.sendOnly(e+Ir,n),this.sendOnly(e,n),this.sendOnly(e+Ot,n)},t}();const Dt=Jn;function Ie(){return Ie=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},Ie.apply(this,arguments)}function Qn(){var t=pr(),r=Wn(t);return r}function Wn(t){if(!t)return{};for(var r={},i=/^data-([\w-]+)$/,e=t.attributes,n=0;n<e.length;n++){var a=e[n];if(i.test(a.nodeName)){var o=a.nodeName.match(i)[1],s=o.split("-").map(function(u,f){return f>0?u.charAt(0).toUpperCase()+u.substring(1):u}).join("");r[s]=a.value||a.nodeValue}}return r}var Zn=function(){function t(){this.config={serviceName:"",serviceVersion:"",environment:"",serverUrl:"http://localhost:8200",serverUrlPrefix:"",active:!0,instrument:!0,disableInstrumentations:[],logLevel:"warn",breakdownMetrics:!1,ignoreTransactions:[],eventsLimit:80,queueLimit:-1,flushInterval:500,distributedTracing:!0,distributedTracingOrigins:[],distributedTracingHeaderName:"traceparent",pageLoadTraceId:"",pageLoadSpanId:"",pageLoadSampled:!1,pageLoadTransactionName:"",propagateTracestate:!1,transactionSampleRate:1,centralConfig:!1,monitorLongtasks:!0,apiVersion:2,context:{},session:!1,apmRequest:null,sendCredentials:!1},this.events=new Dt,this.filters=[],this.version=""}var r=t.prototype;return r.init=function(){var e=Qn();this.setConfig(e)},r.setVersion=function(e){this.version=e},r.addFilter=function(e){if(typeof e!="function")throw new Error("Argument to must be function");this.filters.push(e)},r.applyFilters=function(e){for(var n=0;n<this.filters.length;n++)if(e=this.filters[n](e),!e)return;return e},r.get=function(e){return e.split(".").reduce(function(n,a){return n&&n[a]},this.config)},r.setUserContext=function(e){e===void 0&&(e={});var n={},a=e,o=a.id,s=a.username,u=a.email;(typeof o=="number"||typeof o=="string")&&(n.id=o),typeof s=="string"&&(n.username=s),typeof u=="string"&&(n.email=u),this.config.context.user=P(this.config.context.user||{},n)},r.setCustomContext=function(e){e===void 0&&(e={}),this.config.context.custom=P(this.config.context.custom||{},e)},r.addLabels=function(e){var n=this;this.config.context.tags||(this.config.context.tags={});var a=Object.keys(e);a.forEach(function(o){return vt(o,e[o],n.config.context.tags)})},r.setConfig=function(e){e===void 0&&(e={});var n=e,a=n.transactionSampleRate,o=n.serverUrl;o&&(e.serverUrl=o.replace(/\/+$/,"")),Se(a)||(a<1e-4&&a>0&&(a=1e-4),e.transactionSampleRate=Math.round(a*1e4)/1e4),fe(this.config,e),this.events.send(Tt,[this.config])},r.validate=function(e){e===void 0&&(e={});var n=["serviceName","serverUrl"],a=Object.keys(this.config),o={missing:[],invalid:[],unknown:[]};Object.keys(e).forEach(function(u){n.indexOf(u)!==-1&&!e[u]&&o.missing.push(u),a.indexOf(u)===-1&&o.unknown.push(u)}),e.serviceName&&!/^[a-zA-Z0-9 _-]+$/.test(e.serviceName)&&o.invalid.push({key:"serviceName",value:e.serviceName,allowed:"a-z, A-Z, 0-9, _, -, <space>"});var s=e.transactionSampleRate;return typeof s<"u"&&(typeof s!="number"||isNaN(s)||s<0||s>1)&&o.invalid.push({key:"transactionSampleRate",value:s,allowed:"Number between 0 and 1"}),o},r.getLocalConfig=function(){var e=sessionStorage;this.config.session&&(e=localStorage);var n=e.getItem(Ve);if(n)return JSON.parse(n)},r.setLocalConfig=function(e,n){if(e){if(n){var a=this.getLocalConfig();e=Ie({},a,e)}var o=sessionStorage;this.config.session&&(o=localStorage),o.setItem(Ve,JSON.stringify(e))}},r.dispatchEvent=function(e,n){this.events.send(e,n)},r.observeEvent=function(e,n){return this.events.observe(e,n)},t}();const ei=Zn;var ti=function(){function t(i){i===void 0&&(i={}),this.levels=["trace","debug","info","warn","error"],this.level=i.level||"warn",this.prefix=i.prefix||"",this.resetLogMethods()}var r=t.prototype;return r.shouldLog=function(e){return this.levels.indexOf(e)>=this.levels.indexOf(this.level)},r.setLevel=function(e){e!==this.level&&(this.level=e,this.resetLogMethods())},r.resetLogMethods=function(){var e=this;this.levels.forEach(function(n){e[n]=e.shouldLog(n)?a:ue;function a(){var o=n;(n==="trace"||n==="debug")&&(o="info");var s=arguments;if(s[0]=this.prefix+s[0],console){var u=console[o]||console.log;typeof u=="function"&&u.apply(console,s)}}})},t}();const ri=ti;var J,te=(J={},J[T]=function(){return new ei},J[x]=function(){return new ri({prefix:"[Elastic APM] "})},J[re]=function(t){var r=t.getService([T,x]),i=r[0],e=r[1];return new Yn(i,e)},J),ni=function(){function t(){this.instances={},this.initialized=!1}var r=t.prototype;return r.init=function(){if(!this.initialized){this.initialized=!0;var e=this.getService(T);e.init();var n=this.getService([x,re]),a=n[0],o=n[1];e.events.observe(Tt,function(){var s=e.get("logLevel");a.setLevel(s)}),o.init()}},r.getService=function(e){var n=this;if(typeof e=="string")return this.instances[e]||typeof te[e]=="function"&&(this.instances[e]=te[e](this)),this.instances[e];if(Array.isArray(e))return e.map(function(a){return n.getService(a)})},t}();function ii(){te[Re]=function(t){var r=t.getService([re,T,C]),i=r[0],e=r[1],n=r[2];return new ln(i,e,n)}}function ai(t){var r=XMLHttpRequest.prototype;if(!r||!r[$e])return;var i="readystatechange",e="load",n="error",a="timeout",o="abort";function s(c,v){c.state!==O&&(c.state=O,c.data.status=v,t(O,c))}function u(c){if(c.state===F)return;c.state=F,t(F,c);var v=c.data.target;function l(p){v[$e](p,function(h){var g=h.type;if(g===i)v.readyState===4&&v.status!==0&&s(c,"success");else{var m=g===e?"success":g;s(c,m)}})}l(i),l(e),l(a),l(n),l(o)}var f=Ke(r,"open",function(){return function(c,v){return c[Le]||(c[Qe]=v[0],c[Je]=v[1],c[Ye]=v[2]===!1),f.apply(c,v)}}),d=Ke(r,"send",function(){return function(c,v){if(c[Le])return d.apply(c,v);var l={source:M,state:"",type:"macroTask",data:{target:c,method:c[Qe],sync:c[Ye],url:c[Je],status:""}};try{return u(l),d.apply(c,v)}catch(p){throw s(l,n),p}}})}function oi(t){if(!Ut())return;function r(o){o.state=F,t(F,o)}function i(o){o.state=O,t(O,o)}function e(o,s){o.data.aborted=si(s),o.data.error=s,i(o)}function n(o,s){var u=o.getReader(),f=function d(){u.read().then(function(c){var v=c.done;v?i(s):d()},function(c){e(s,c)})};f()}var a=window.fetch;window.fetch=function(o,s){var u=this,f=arguments,d,c;if(typeof o=="string")d=new Request(o,s),c=o;else if(o)d=o,c=d.url;else return a.apply(u,f);var v={source:H,state:"",type:"macroTask",data:{target:d,method:d.method,url:c,aborted:!1}};return new I(function(l,p){oe.fetchInProgress=!0,r(v);var h;try{h=a.apply(u,[d])}catch(g){p(g),v.data.error=g,i(v),oe.fetchInProgress=!1;return}h.then(function(g){var m=g.clone?g.clone():{};l(g),De(function(){v.data.response=g;var y=m.body;y?n(y,v):i(v)})},function(g){p(g),De(function(){e(v,g)})}),oe.fetchInProgress=!1})}}function si(t){return t&&t.name==="AbortError"}function ui(t){if(window.history){var r=history.pushState;typeof r=="function"&&(history.pushState=function(i,e,n){var a={source:j,data:{state:i,title:e,url:n}};t(O,a),r.apply(this,arguments)})}}var L=new Dt,Ze=!1;function ci(){return Ze||(Ze=!0,ai(function(t,r){L.send(M,[t,r])}),oi(function(t,r){L.send(H,[t,r])}),ui(function(t,r){L.send(j,[t,r])})),L}var fi=.05,di=6e4;function vi(t,r,i){t.sort(function(a,o){return a._start-o._start});var e=[],n=1;return t.forEach(function(a,o){if(e.length===0)e.push(a);else{var s=e[e.length-1],u=s.type===a.type&&s.subtype===a.subtype&&s.action===a.action&&s.name===a.name&&a.duration()/r<i&&(a._start-s._end)/r<i,f=t.length===o+1;u&&(n++,s._end=a._end),n>1&&(!u||f)&&(s.name=n+"x "+s.name,n=1),u||e.push(a)}}),e}function li(t){if(t.sampled){var r=t.spans.filter(function(n){return n.duration()>0&&n._start>=t._start&&n._end<=t._end});if(t.isManaged()){var i=t.duration(),e=vi(r,i,fi);t.spans=e}else t.spans=r}else t.resetFields();return t}var pi=function(){function t(i,e,n,a){this._apmServer=i,this._configService=e,this._logginService=n,this._transactionService=a}var r=t.prototype;return r.init=function(e){var n=this;e===void 0&&(e={}),this._configService.events.observe(Et+Ot,function(a){var o=n.createTransactionPayload(a);o&&(n._apmServer.addTransaction(o),n._configService.dispatchEvent(bt))}),e[j]&&L.observe(j,this.getHistorySub()),e[M]&&L.observe(M,this.getXHRSub()),e[H]&&L.observe(H,this.getFetchSub())},r.getHistorySub=function(){var e=this._transactionService;return function(n,a){a.source===j&&n===O&&e.startTransaction(a.data.title,"route-change",{managed:!0,canReuse:!0})}},r.getXHRSub=function(){var e=this;return function(n,a){a.source===M&&!oe.fetchInProgress&&e.processAPICalls(n,a)}},r.getFetchSub=function(){var e=this;return function(n,a){a.source===H&&e.processAPICalls(n,a)}},r.processAPICalls=function(e,n){var a=this._configService,o=this._transactionService;if(n.data&&n.data.url){var s=this._apmServer.getEndpoints(),u=Object.keys(s).some(function(qt){return n.data.url.indexOf(s[qt])!==-1});if(u)return}if(e===F&&n.data){var f=n.data,d=new q(f.url),c=f.method+" "+(d.relative?d.path:lt(d.href));o.getCurrentTransaction()||o.startTransaction(c,Ee,{managed:!0});var v=o.startSpan(c,"external.http",{blocking:!0});if(!v)return;var l=a.get("distributedTracing"),p=a.get("distributedTracingOrigins"),h=new q(window.location.href),g=ye(d.origin,h.origin)||ye(d.origin,p),m=f.target;if(l&&g&&m){this.injectDtHeader(v,m);var y=a.get("propagateTracestate");y&&this.injectTSHeader(v,m)}f.sync&&(v.sync=f.sync),f.span=v}else if(e===O){var E=n.data;if(E&&E.span){var w=E.span,V=E.response,de=E.target,ne;V?ne=V.status:ne=de.status;var G;E.status!="abort"&&!E.aborted?ne>=400||ne==0?G=Or:G=Nr:G=xr,w.outcome=G;var ve=o.getCurrentTransaction();ve&&ve.type===Ee&&(ve.outcome=G),o.endSpan(w,E)}}},r.injectDtHeader=function(e,n){var a=this._configService.get("distributedTracingHeaderName"),o=or(e),s=ur(o);s&&o&&a&&Ue(n,a,o)},r.injectTSHeader=function(e,n){var a=cr(e);a&&Ue(n,"tracestate",a)},r.extractDtHeader=function(e){var n=this._configService,a=n.get("distributedTracingHeaderName");if(e)return sr(e[a])},r.filterTransaction=function(e){var n=e.duration();return!(!n||e.isManaged()&&(n>di||e.sampled&&e.spans.length===0))},r.createTransactionDataModel=function(e){var n=e._start,a=e.spans.map(function(s){var u={id:s.id,transaction_id:e.id,parent_id:s.parentId||e.id,trace_id:e.traceId,name:s.name,type:s.type,subtype:s.subtype,action:s.action,sync:s.sync,start:parseInt(s._start-n),duration:s.duration(),context:s.context,outcome:s.outcome,sample_rate:s.sampleRate};return ee(Zr,u)}),o={id:e.id,trace_id:e.traceId,session:e.session,name:e.name,type:e.type,duration:e.duration(),spans:a,context:e.context,marks:e.marks,breakdown:e.breakdownTimings,span_count:{started:a.length},sampled:e.sampled,sample_rate:e.sampleRate,experience:e.experience,outcome:e.outcome};return ee(en,o)},r.createTransactionPayload=function(e){var n=li(e),a=this.filterTransaction(n);if(a)return this.createTransactionDataModel(e)},t}(),et=[["domainLookupStart","domainLookupEnd","DNS"],["connectStart","connectEnd","TCP"],["requestStart","responseStart","Request"],["responseStart","responseEnd","Response"],["domLoading","domComplete","Processing"],["loadEventStart","loadEventEnd","Load"]];function Q(t){return{value:t}}function hi(t){var r=t.spans,i=t._start,e=t._end;if(r.length===0)return t.duration();r.sort(function(d,c){return d._start-c._start});for(var n=r[0],a=n._end,o=n._start,s=a,u=o-i,f=1;f<r.length;f++)n=r[f],o=n._start,a=n._end,o>s?(u+=o-s,s=a):a>s&&(s=a);return s<e&&(u+=e-s),u}function gi(t){var r={},i=hi(t);r.app={count:1,duration:i};for(var e=t.spans,n=0;n<e.length;n++){var a=e[n],o=a.duration();if(!(o===0||o==null)){var s=a.type,u=a.subtype,f=s.replace(Fe,"");u&&(f+="."+u),r[f]||(r[f]={duration:0,count:0}),r[f].count++,r[f].duration+=o}}return r}function tt(t,r){var i=r.details,e=r.count,n=e===void 0?1:e,a=r.duration;return{transaction:t,span:i,samples:{"span.self_time.count":Q(n),"span.self_time.sum.us":Q(a)}}}function mi(t,r){r===void 0&&(r=N.timing);var i=[],e=t.duration(),n=t.name,a=t.type,o=t.sampled,s={name:n,type:a};if(i.push({transaction:s,samples:{"transaction.duration.count":Q(1),"transaction.duration.sum.us":Q(e),"transaction.breakdown.count":Q(o?1:0)}}),!o)return i;if(a===R&&r)for(var u=0;u<et.length;u++){var f=et[u],d=r[f[0]],c=r[f[1]],v=gt(d,c);v===0||v==null||i.push(tt(s,{details:{type:f[2]},duration:v}))}else{var l=gi(t);Object.keys(l).forEach(function(p){var h=p.split("."),g=h[0],m=h[1],y=l[p],E=y.duration,w=y.count;i.push(tt(s,{details:{type:g,subtype:m},duration:E,count:w}))})}return i}function yi(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,Ae(t,r)}function Ae(t,r){return Ae=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},Ae(t,r)}var Si=function(t){yi(r,t);function r(e,n,a){var o;return o=t.call(this,e,n,a)||this,o.traceId=U(),o.marks=void 0,o.spans=[],o._activeSpans={},o._activeTasks=new Set,o.blocked=!1,o.captureTimings=!1,o.breakdownTimings=[],o.sampleRate=o.options.transactionSampleRate,o.sampled=Math.random()<=o.sampleRate,o}var i=r.prototype;return i.addMarks=function(n){this.marks=fe(this.marks||{},n)},i.mark=function(n){var a=pt(n),o=D()-this._start,s={};s[a]=o,this.addMarks({custom:s})},i.canReuse=function(){var n=this.options.reuseThreshold||wr;return!!this.options.canReuse&&!this.ended&&D()-this._start<n},i.redefine=function(n,a,o){n&&(this.name=n),a&&(this.type=a),o&&(this.options.reuseThreshold=o.reuseThreshold,P(this.options,o))},i.startSpan=function(n,a,o){var s=this;if(!this.ended){var u=P({},o);u.onEnd=function(d){s._onSpanEnd(d)},u.traceId=this.traceId,u.sampled=this.sampled,u.sampleRate=this.sampleRate,u.parentId||(u.parentId=this.id);var f=new k(n,a,u);return this._activeSpans[f.id]=f,u.blocking&&this.addTask(f.id),f}},i.isFinished=function(){return!this.blocked&&this._activeTasks.size===0},i.detectFinish=function(){this.isFinished()&&this.end()},i.end=function(n){if(!this.ended){this.ended=!0,this._end=_e(n);for(var a in this._activeSpans){var o=this._activeSpans[a];o.type=o.type+Fe,o.end(n)}this.callOnEnd()}},i.captureBreakdown=function(){this.breakdownTimings=mi(this)},i.block=function(n){this.blocked=n,this.blocked||this.detectFinish()},i.addTask=function(n){return n||(n="task-"+U(16)),this._activeTasks.add(n),n},i.removeTask=function(n){var a=this._activeTasks.delete(n);a&&this.detectFinish()},i.resetFields=function(){this.spans=[],this.sampleRate=0},i._onSpanEnd=function(n){this.spans.push(n),delete this._activeSpans[n.id],this.removeTask(n.id)},i.isManaged=function(){return!!this.options.managed},r}(Ft);const rt=Si;var _={fid:0,fcp:0,tbt:{start:1/0,duration:0},cls:{score:0,firstEntryTime:Number.NEGATIVE_INFINITY,prevEntryTime:Number.NEGATIVE_INFINITY,currentSessionScore:0},longtask:{count:0,duration:0,max:0}},_i=50;function Ei(t,r){for(var i=[],e=0;e<t.length;e++){var n=t[e],a=n.name,o=n.startTime,s=n.duration,u=n.attribution,f=o+s,d=new k("Longtask("+a+")",Z,{startTime:o});if(r.count++,r.duration+=s,r.max=Math.max(s,r.max),u.length>0){var c=u[0],v=c.name,l=c.containerType,p=c.containerName,h=c.containerId,g={attribution:v,type:l};p&&(g.name=p),h&&(g.id=h),d.addContext({custom:g})}d.end(f),i.push(d)}return i}function Ti(t){var r=t[0];if(r){var i=r.startTime,e=r.processingStart,n=new k("First Input Delay",ke,{startTime:i});return n.end(e),n}}function bi(t){var r=t.start,i=t.duration,e=new k("Total Blocking Time",Z,{startTime:r});return e.end(r+i),e}function wi(t){t.forEach(function(r){var i=r.name,e=r.startTime,n=r.duration;if(!(e<_.fcp)&&!(i!=="self"&&i.indexOf("same-origin")===-1)){_.tbt.start=Math.min(_.tbt.start,e);var a=n-_i;a>0&&(_.tbt.duration+=a)}})}function Ri(t){t.forEach(function(r){if(!r.hadRecentInput&&r.value){var i=r.startTime-_.cls.firstEntryTime>5e3||r.startTime-_.cls.prevEntryTime>1e3;i&&(_.cls.firstEntryTime=r.startTime,_.cls.currentSessionScore=0),_.cls.prevEntryTime=r.startTime,_.cls.currentSessionScore+=r.value,_.cls.score=Math.max(_.cls.score,_.cls.currentSessionScore)}})}function Ni(t,r){var i=r.isHardNavigation,e=r.trStart,n=t.getEntriesByType(Z).filter(function(m){return m.startTime>=e}),a=Ei(n,_.longtask),o={spans:a,marks:{}};if(!i)return o;var s=t.getEntriesByType(xt),u=s[s.length-1];if(u){var f=parseInt(u.startTime);_.lcp=f,o.marks.largestContentfulPaint=f}var d=N.timing,c=d.fetchStart-d.navigationStart,v=t.getEntriesByName(Mr)[0];if(v){var l=parseInt(c>=0?v.startTime-c:v.startTime);_.fcp=l,o.marks.firstContentfulPaint=l}var p=t.getEntriesByType(ke),h=Ti(p);h&&(_.fid=h.duration(),o.spans.push(h)),wi(n);var g=t.getEntriesByType(we);return Ri(g),o}var Oi=function(){function t(i){this.po={observe:ue,disconnect:ue},window.PerformanceObserver&&(this.po=new PerformanceObserver(i))}var r=t.prototype;return r.start=function(e){try{this.po.observe({type:e,buffered:!0})}catch{}},r.stop=function(){this.po.disconnect()},t}(),xi=function(){function t(i,e){var n=this;this._config=e,this._logger=i,this.currentTransaction=void 0,this.respIntervalId=void 0,this.recorder=new Oi(function(a){var o=n.getCurrentTransaction();if(o&&o.captureTimings){var s,u=o.type===R,f=Ni(a,{isHardNavigation:u,trStart:u?0:o._start}),d=f.spans,c=f.marks;(s=o.spans).push.apply(s,d),o.addMarks({agent:c})}})}var r=t.prototype;return r.createCurrentTransaction=function(e,n,a){var o=new rt(e,n,a);return this.currentTransaction=o,o},r.getCurrentTransaction=function(){if(this.currentTransaction&&!this.currentTransaction.ended)return this.currentTransaction},r.createOptions=function(e){var n=this._config.config,a={transactionSampleRate:n.transactionSampleRate},o=P(a,e);return o.managed&&(o=P({pageLoadTraceId:n.pageLoadTraceId,pageLoadSampled:n.pageLoadSampled,pageLoadSpanId:n.pageLoadSpanId,pageLoadTransactionName:n.pageLoadTransactionName},o)),o},r.startManagedTransaction=function(e,n,a){var o=this.getCurrentTransaction(),s=!1;if(!o)o=this.createCurrentTransaction(e,n,a);else if(o.canReuse()&&a.canReuse){var u=o.type,f=Be.indexOf(o.type),d=Be.indexOf(n);f>=0&&d<f&&(u=n),o.redefine(e,u,a),s=!0}else o.end(),o=this.createCurrentTransaction(e,n,a);return o.type===R&&(s||(this.recorder.start(xt),this.recorder.start(Ar),this.recorder.start(ke),this.recorder.start(we)),a.pageLoadTraceId&&(o.traceId=a.pageLoadTraceId),a.pageLoadSampled&&(o.sampled=a.pageLoadSampled),o.name===ae&&a.pageLoadTransactionName&&(o.name=a.pageLoadTransactionName)),!s&&this._config.get("monitorLongtasks")&&this.recorder.start(Z),o.sampled&&(o.captureTimings=!0),o},r.startTransaction=function(e,n,a){var o=this,s=this.createOptions(a),u,f=!0;if(s.managed){var d=this.currentTransaction;u=this.startManagedTransaction(e,n,s),d===u&&(f=!1)}else u=new rt(e,n,s);return u.onEnd=function(){return o.handleTransactionEnd(u)},f&&this._config.events.send(Lr,[u]),u},r.handleTransactionEnd=function(e){var n=this;this.recorder.stop();var a=window.location.href;return I.resolve().then(function(){var o=e.name,s=e.type,u=$.lastHiddenStart;if(!(u>=e._start)&&!(n.shouldIgnoreTransaction(o)||s===Te)){if(s===R){var f=n._config.get("pageLoadTransactionName");if(o===ae&&f&&(e.name=f),e.captureTimings){var d=_.cls,c=_.fid,v=_.tbt,l=_.longtask;v.duration>0&&e.spans.push(bi(v)),e.experience={},qe(Z)&&(e.experience.tbt=v.duration),qe(we)&&(e.experience.cls=d.score),c>0&&(e.experience.fid=c),l.count>0&&(e.experience.longtask={count:l.count,sum:l.duration,max:l.max})}n.setSession(e)}e.name===ae&&(e.name=Tr(a)),Ln(e),n.adjustTransactionTime(e);var p=n._config.get("breakdownMetrics");p&&e.captureBreakdown();var h=n._config.get("context");Jr(e,h),n._config.events.send(Et,[e])}},function(o){})},r.setSession=function(e){var n=this._config.get("session");if(n){typeof n=="boolean"?e.session={id:U(16),sequence:1}:n.timestamp&&Date.now()-n.timestamp>Hr?e.session={id:U(16),sequence:1}:e.session={id:n.id,sequence:n.sequence?n.sequence+1:1};var a={session:{id:e.session.id,sequence:e.session.sequence,timestamp:Date.now()}};this._config.setConfig(a),this._config.setLocalConfig(a,!0)}},r.adjustTransactionTime=function(e){var n=e.spans,a=mr(n);a&&a._start<e._start&&(e._start=a._start);var o=hr(n)||{},s=o._end||0;if(e.type===R){var u=e._end-yt,f=_.lcp||0,d=gr(n)||{},c=d._end||0;e._end=Math.max(s,c,f,u)}else s>e._end&&(e._end=s);this.truncateSpans(n,e._end)},r.truncateSpans=function(e,n){for(var a=0;a<e.length;a++){var o=e[a];o._end>n&&(o._end=n,o.type+=Fe),o._start>n&&(o._start=n)}},r.shouldIgnoreTransaction=function(e){var n=this._config.get("ignoreTransactions");if(n&&n.length)for(var a=0;a<n.length;a++){var o=n[a];if(typeof o.test=="function"){if(o.test(e))return!0}else if(o===e)return!0}return!1},r.startSpan=function(e,n,a){var o=this.getCurrentTransaction();o||(o=this.createCurrentTransaction(void 0,Te,this.createOptions({canReuse:!0,managed:!0})));var s=o.startSpan(e,n,a);return s},r.endSpan=function(e,n){e&&e.end(null,n)},t}();const Ci=xi;function Li(){te[C]=function(t){var r=t.getService([x,T]),i=r[0],e=r[1];return new Ci(i,e)},te[Ct]=function(t){var r=t.getService([re,T,x,C]),i=r[0],e=r[1],n=r[2],a=r[3];return new pi(i,e,n,a)}}function Ii(t,r){document.visibilityState==="hidden"&&($.lastHiddenStart=0);var i=function(){document.visibilityState==="hidden"&&nt(t,r)},e=function(){return nt(t,r)},n=!0;return window.addEventListener("visibilitychange",i,n),window.addEventListener("pagehide",e,n),function(){window.removeEventListener("visibilitychange",i,n),window.removeEventListener("pagehide",e,n)}}function nt(t,r){var i=r.getCurrentTransaction();if(i){var e=t.observeEvent(bt,function(){t.dispatchEvent(be),$.lastHiddenStart=D(),e()});i.end()}else t.dispatchEvent(be),$.lastHiddenStart=D()}function Ai(t){var r=function(a){a.target instanceof Element&&Pi(t,a.target)},i="click",e=!0;return window.addEventListener(i,r,e),function(){window.removeEventListener(i,r,e)}}function Pi(t,r){var i=ki(r),e=i.transactionName,n=i.context,a=t.startTransaction("Click - "+e,_t,{managed:!0,canReuse:!0,reuseThreshold:300});a&&n&&a.addContext(n)}function ki(t){var r={transactionName:null,context:null},i=t.tagName.toLowerCase(),e=i;if(t.dataset.transactionName)e=t.dataset.transactionName;else{var n=t.getAttribute("name");n&&(e=i+'["'+n+'"]')}r.transactionName=e;var a=t.getAttribute("class");return a&&(r.context={custom:{classes:a}}),r}function Fi(t,r){var i,e=(i={},i[M]=!1,i[H]=!1,i[j]=!1,i[R]=!1,i[Nt]=!1,i[wt]=!1,i[Rt]=!1,i);return t&&Object.keys(e).forEach(function(n){r.indexOf(n)===-1&&(e[n]=!0)}),e}var it=!1;function Mi(){return fr()?(ci(),$.bootstrapTime=D(),it=!0):A&&console.log("[Elastic APM] platform is not supported!"),it}function Hi(){Li(),ii();var t=new ni;return t}var ji=function(){function t(i,e){this._disable=e,this.serviceFactory=i,this._initialized=!1}var r=t.prototype;return r.isEnabled=function(){return!this._disable},r.isActive=function(){var e=this.serviceFactory.getService(T);return this.isEnabled()&&this._initialized&&e.get("active")},r.init=function(e){var n=this;if(this.isEnabled()&&!this._initialized){this._initialized=!0;var a=this.serviceFactory.getService([T,x,C]),o=a[0],s=a[1],u=a[2];o.setVersion("5.12.0"),this.config(e);var f=o.get("logLevel");s.setLevel(f);var d=o.get("active");if(d){this.serviceFactory.init();var c=Fi(o.get("instrument"),o.get("disableInstrumentations")),v=this.serviceFactory.getService(Ct);if(v.init(c),c[Nt]){var l=this.serviceFactory.getService(Re);l.registerListeners()}if(o.get("session")){var p=o.getLocalConfig();p&&p.session&&o.setConfig({session:p.session})}var h=function(){return c[R]&&n._sendPageLoadMetrics()};o.get("centralConfig")?this.fetchCentralConfig().then(h):h(),Ii(o,u),c[wt]&&c[Rt]&&Ai(u)}else this._disable=!0,s.warn("RUM agent is inactive")}return this},r.fetchCentralConfig=function(){var e=this.serviceFactory.getService([re,x,T]),n=e[0],a=e[1],o=e[2];return n.fetchConfig(o.get("serviceName"),o.get("environment")).then(function(s){var u=s.transaction_sample_rate;if(u){u=Number(u);var f={transactionSampleRate:u},d=o.validate(f),c=d.invalid;if(c.length===0)o.setConfig(f);else{var v=c[0],l=v.key,p=v.value,h=v.allowed;a.warn('invalid value "'+p+'" for '+l+". Allowed: "+h+".")}}return s}).catch(function(s){a.warn("failed fetching config:",s)})},r._sendPageLoadMetrics=function(){var e=this.startTransaction(void 0,R,{managed:!0,canReuse:!0});if(e){e.addTask(R);var n=function(){setTimeout(function(){return e.removeTask(R)},yt)};document.readyState==="complete"?n():window.addEventListener("load",n)}},r.observe=function(e,n){var a=this.serviceFactory.getService(T);a.events.observe(e,n)},r.config=function(e){var n=this.serviceFactory.getService([T,x]),a=n[0],o=n[1],s=a.validate(e),u=s.missing,f=s.invalid,d=s.unknown;if(d.length>0){var c="Unknown config options are specified for RUM agent: "+d.join(", ");o.warn(c)}if(u.length===0&&f.length===0)a.setConfig(e);else{var v=", ",l="RUM agent isn't correctly configured. ";u.length>0&&(l+=u.join(v)+" is missing",f.length>0&&(l+=v)),f.forEach(function(p,h){var g=p.key,m=p.value,y=p.allowed;l+=g+' "'+m+'" contains invalid characters! (allowed: '+y+")"+(h!==f.length-1?v:"")}),o.error(l),a.setConfig({active:!1})}},r.setUserContext=function(e){var n=this.serviceFactory.getService(T);n.setUserContext(e)},r.setCustomContext=function(e){var n=this.serviceFactory.getService(T);n.setCustomContext(e)},r.addLabels=function(e){var n=this.serviceFactory.getService(T);n.addLabels(e)},r.setInitialPageLoadName=function(e){var n=this.serviceFactory.getService(T);n.setConfig({pageLoadTransactionName:e})},r.startTransaction=function(e,n,a){if(this.isEnabled()){var o=this.serviceFactory.getService(C);return o.startTransaction(e,n,a)}},r.startSpan=function(e,n,a){if(this.isEnabled()){var o=this.serviceFactory.getService(C);return o.startSpan(e,n,a)}},r.getCurrentTransaction=function(){if(this.isEnabled()){var e=this.serviceFactory.getService(C);return e.getCurrentTransaction()}},r.captureError=function(e){if(this.isEnabled()){var n=this.serviceFactory.getService(Re);return n.logError(e)}},r.addFilter=function(e){var n=this.serviceFactory.getService(T);n.addFilter(e)},t}();function Ui(){if(A&&window.elasticApm)return window.elasticApm;var t=Mi(),r=Hi(),i=new ji(r,!t);return A&&(window.elasticApm=i),i}var at=Ui(),Di=at.init.bind(at);const qi=!1,$i=!1,Bi=!0;Di({serviceName:"awesome-front",serverUrl:"http://localhost:8200",serviceVersion:"",environment:"local"});const Vi=Object.freeze(Object.defineProperty({__proto__:null,csr:Bi,prerender:qi,ssr:$i},Symbol.toStringTag,{value:"Module"}));export{Vi as _,Bi as c,qi as p,$i as s};
