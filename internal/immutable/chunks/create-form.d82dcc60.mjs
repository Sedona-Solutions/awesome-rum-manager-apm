import{w as rt}from"./singletons.978cfea4.mjs";import{X as nt}from"./index.7a280137.mjs";function it(e,...t){const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function le(e){let t;return it(e,r=>t=r)(),t}class st extends Error{constructor(t,r){super(t),this.name="FelteSubmitError",this.response=r}}function ot(e,t){return Object.keys(e).some(n=>t(e[n]))}function Ce(e,t){return Object.keys(e||{}).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:t(e[i])}),{})}function y(e){return Object.prototype.toString.call(e)==="[object Object]"}function K(e){return Object.keys(e||{}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:y(e[r])?K(e[r]):Array.isArray(e[r])?[...e[r]]:e[r]}),{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ut(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function at(e){return function(t){if(y(t)){const r=B(t,e);return ut(r,["key"])}return e}}function B(e,t){return Ce(e,r=>y(r)?B(r,t):Array.isArray(r)?r.map(at(t)):t)}function Ee(...e){const t=e.pop(),r=e.shift();if(typeof r=="string")return r;const n=K(r);if(e.length===0)return n;for(const i of e){if(!i)continue;if(typeof i=="string")return i;let s=t(n,i);if(typeof s<"u")return s;const u=Array.from(new Set(Object.keys(n).concat(Object.keys(i))));for(const c of u)if(s=t(n[c],i[c]),typeof s<"u")n[c]=s;else if(y(i[c])&&y(n[c]))n[c]=Ee(n[c],i[c],t);else if(Array.isArray(i[c]))n[c]=i[c].map((p,A)=>{if(!y(p))return p;const w=Array.isArray(n[c])?n[c][A]:n[c];return Ee(w,p,t)});else if(y(i[c])){const p=B(K(i[c]),void 0);n[c]=Ee(p,i[c],t)}else typeof i[c]<"u"&&(n[c]=i[c])}return n}function ct(e,t){if(!(y(e)&&y(t))){if(Array.isArray(t)){if(t.some(y))return;const r=Array.isArray(e)?e:[];return t.map((n,i)=>{var s;return(s=r[i])!==null&&s!==void 0?s:n})}if(typeof e<"u")return e}}function Be(...e){return Ee(...e,ct)}function Je(...e){return Ee(...e,()=>{})}function fe(e,t,r){const n=s=>String.prototype.split.call(t,s).filter(Boolean).reduce((u,c)=>u!=null?u[c]:u,e),i=n(/[,[\]]+?/)||n(/[,[\].]+?/);return i===void 0||i===e?r:i}function We(e,t,r){e&&(e=K(e)),y(e)||(e={});const n=Array.isArray(t)?t:t.match(/[^.[\]]+/g)||[],i=n[n.length-1];if(!i)return e;let s=e;for(let u=0;u<n.length-1;u++){const c=n[u];if(!s[c]||!y(s[c])&&!Array.isArray(s[c])){const p=n[u+1];isNaN(Number(p))?s[c]={}:s[c]=[]}s=s[c]}return s[i]=r(s[i]),e}function E(e,t,r){return We(e,t,()=>r)}function xe(e,t){if(!e||Object(e)!==e)return;typeof e<"u"&&(e=K(e));const r=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g)||[],n=r.length===1?e:fe(e,r.slice(0,-1).join("."));return Array.isArray(n)?n.splice(Number(r[r.length-1]),1):n==null||delete n[r[r.length-1]],e}function Le(e,t){return ot(e,r=>y(r)?Le(r,t):Array.isArray(r)?r.length===0||r.every(n=>typeof n=="string")?t(r):r.some(n=>y(n)?Le(n,t):t(n)):t(r))}function De(e){return(e==null?void 0:e.nodeName)==="INPUT"}function lt(e){return(e==null?void 0:e.nodeName)==="TEXTAREA"}function Te(e){return(e==null?void 0:e.nodeName)==="SELECT"}function He(e){return(e==null?void 0:e.nodeName)==="FIELDSET"}function U(e){return De(e)||lt(e)||Te(e)}function ze(e){return e.nodeType===Node.ELEMENT_NODE}function j(e,t){return t??(U(e)?e.name:"")}function Me(e){let t=e;for(;t&&t.nodeName!=="FORM";){if(t.hasAttribute("data-felte-ignore"))return!0;t=t.parentElement}return!1}function dt(e,t){if(!(y(e)||y(t))){if(e===null||e==="")return t;if(t===null||t===""||!t)return e;if(!(!e||!t)){if(Array.isArray(e)){if(!Array.isArray(t))return[...e,t];const r=[],n=Math.max(t.length,e.length);for(let i=0;i<n;i++){let s=e[i],u=t[i];!y(s)&&!y(u)?(Array.isArray(s)||(s=[s]),Array.isArray(u)||(u=[u]),r.push(...s,...u)):r.push(ke([s??{},u??{}]))}return r.filter(Boolean)}return Array.isArray(t)||(t=[t]),[e,...t].reduce((r,n)=>r.concat(n),[]).filter(Boolean)}}}function ke(e){return Ee(...e,dt)}function ft(e,t){return t?(Array.isArray(t)?t:[t]).map(n=>n(e)):[]}function $e(e,t){return t?Array.isArray(t)?t.reduce((r,n)=>n(r),e):t(e):e}function Qe(e=8){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function Ue(e,t,{onInit:r,onEnd:n}={}){let i;return(...s)=>{i||r==null||r(),i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,s),i=void 0,n==null||n()},t)}}function qe(e){if(U(e))return[e];if(e.childElementCount===0)return[];const t=new Set;for(const r of e.children){if(U(r)&&t.add(r),He(r))for(const n of r.elements)U(n)&&t.add(n);r.childElementCount>0&&qe(r).forEach(n=>t.add(n))}return Array.from(t)}function Ye(e){for(const t of e.elements)!U(t)&&!He(t)||e.hasAttribute("data-felte-keep-on-remove")&&!t.hasAttribute("data-felte-keep-on-remove")&&(t.dataset.felteKeepOnRemove=e.dataset.felteKeepOnRemove)}function Ze(e){return e.type.match(/^(number|range)$/)?e.value?+e.value:void 0:e.value}function Xe(e){var t;let r={},n={};for(const i of e.elements){if(He(i)&&Ye(i),!U(i)||!i.name)continue;const s=j(i);if(De(i)){if(i.type==="checkbox"){if(typeof fe(r,s)>"u"){if(Array.from(e.querySelectorAll(`[name="${i.name}"]`)).filter(p=>U(p)?s===j(p):!1).length===1){r=E(r,s,i.checked),n=E(n,s,!1);continue}r=E(r,s,i.checked?[i.value]:[]),n=E(n,s,!1);continue}Array.isArray(fe(r,s))&&i.checked&&(r=We(r,s,c=>[...c,i.value]));continue}if(i.type==="radio"){if(fe(r,s))continue;r=E(r,s,i.checked?i.value:void 0),n=E(n,s,!1);continue}if(i.type==="file"){r=E(r,s,i.multiple?Array.from(i.files||[]):(t=i.files)===null||t===void 0?void 0:t[0]),n=E(n,s,!1);continue}}else if(Te(i)){if(!i.multiple)r=E(r,s,i.value);else{const p=Array.from(i.options).filter(A=>A.selected).map(A=>A.value);r=E(r,s,p)}n=E(n,s,!1);continue}const u=Ze(i);r=E(r,s,u),n=E(n,s,!1)}return{defaultData:r,defaultTouched:n}}function vt(e,t){var r;if(!U(e))return;const n=t;if(De(e)){if(e.type==="checkbox"){const i=n;if(typeof i>"u"||typeof i=="boolean"){e.checked=!!i;return}Array.isArray(i)&&(i.includes(e.value)?e.checked=!0:e.checked=!1);return}if(e.type==="radio"){const i=n;e.value===i?e.checked=!0:e.checked=!1;return}if(e.type==="file"){e.files=null,e.value="";return}}else if(Te(e)){if(e.multiple){if(Array.isArray(n)){e.value=String((r=n[0])!==null&&r!==void 0?r:"");const s=n.map(u=>String(u));for(const u of e.options)s.includes(u.value)?u.selected=!0:u.selected=!1}}else{e.value=String(n??"");for(const s of e.options)s.value===String(n)?s.selected=!0:s.selected=!1}return}e.value=String(n??"")}function Re(e,t){for(const r of e.elements){if(He(r)&&Ye(r),!U(r)||!r.name)continue;const n=j(r);vt(r,fe(t,n))}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ve(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function de(e,t){return Ce(e,r=>y(r)?de(r,t):Array.isArray(r)?r.length===0||r.every(n=>typeof n=="string")?t:r.map(n=>{const i=de(n,t);return Ve(i,["key"])}):t)}function ve(e){return e?Ce(e,t=>y(t)?ve(t):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?t:t.map(r=>{if(!y(r))return r;const n=ve(r);return n.key||(n.key=Qe()),n}):t):{}}function Ie(e){return e?Ce(e,t=>y(t)?ve(t):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?t:t.map(r=>{if(!y(r))return r;const n=ve(r);return Ve(n,["key"])}):t):{}}function mt(){class e extends CustomEvent{constructor(i){super("feltesuccess",{detail:i})}}class t extends CustomEvent{constructor(i){super("felteerror",{detail:i,cancelable:!0})}setErrors(i){this.preventDefault(),this.errors=i}}class r extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(i){this.onSubmit=i}handleError(i){this.onError=i}handleSuccess(i){this.onSuccess=i}}return{createErrorEvent:n=>new t(n),createSubmitEvent:()=>new r,createSuccessEvent:n=>new e(n)}}function yt(e){if(e)return async function(){let r=new FormData(e);const n=new URL(e.action),i=e.method.toLowerCase()==="get"?"get":n.searchParams.get("_method")||e.method;let s=e.enctype;e.querySelector('input[type="file"]')&&(s="multipart/form-data"),(i==="get"||s==="application/x-www-form-urlencoded")&&(r=new URLSearchParams(r));let u;i==="get"?(r.forEach((p,A)=>{n.searchParams.append(A,p)}),u={method:i,headers:{Accept:"application/json"}}):u={method:i,body:r,headers:Object.assign(Object.assign({},s!=="multipart/form-data"&&{"Content-Type":s}),{Accept:"application/json"})};const c=await window.fetch(n.toString(),u);if(c.ok)return c;throw new st("An error occurred while submitting the form",c)}}function je(e,t,r,n){return We(e,t,i=>(typeof i<"u"&&!Array.isArray(i)||(i||(i=[]),typeof n>"u"?i.push(r):i.splice(n,0,r)),i))}function pt(e,t,r,n){return We(e,t,i=>(!i||!Array.isArray(i)||([i[r],i[n]]=[i[n],i[r]]),i))}function bt(e,t,r,n){return We(e,t,i=>(!i||!Array.isArray(i)||i.splice(n,0,i.splice(r,1)[0]),i))}function Ge(e){return typeof e=="function"}function he(e){return(r,n)=>{if(typeof r=="string"){const i=r;e(s=>{const u=Ge(n)?n(fe(s,i)):n;return E(s,i,u)})}else e(i=>Ge(r)?r(i):r)}}function At({stores:e,config:t,validateErrors:r,validateWarnings:n,_getCurrentExtenders:i}){var s;let u,c=ve((s=t.initialValues)!==null&&s!==void 0?s:{});const{data:p,touched:A,errors:w,warnings:_,isDirty:N,isSubmitting:k,interacted:D}=e,T=he(p.update),C=he(A.update),S=he(w.update),Q=he(_.update);function G(a){T(v=>{const m=a(v);return u&&Re(u,m),m})}const O=(a,v,m)=>{he(G)(a,v),typeof a=="string"&&m&&C(a,!0)};function oe(a,v,m){const P=y(v)?de(v,!1):!1,L=y(P)?B(P,[]):[];v=y(v)?Object.assign(Object.assign({},v),{key:Qe()}):v,w.update(x=>je(x,a,L,m)),_.update(x=>je(x,a,L,m)),A.update(x=>je(x,a,P,m)),p.update(x=>{const J=je(x,a,v,m);return setTimeout(()=>u&&Re(u,J)),J})}function I(a){w.update(a),_.update(a),A.update(a),p.update(v=>{const m=a(v);return setTimeout(()=>u&&Re(u,m)),m})}function z(a){I(v=>xe(v,a))}function V(a,v,m){I(P=>pt(P,a,v,m))}function ee(a,v,m){I(P=>bt(P,a,v,m))}function me(a){const v=fe(c,a),m=y(v)?de(v,!1):!1,P=y(m)?B(m,[]):[];p.update(L=>{const x=E(L,a,v);return u&&Re(u,x),x}),A.update(L=>E(L,a,m)),w.update(L=>E(L,a,P)),_.update(L=>E(L,a,P))}const b=he(k.update),M=he(N.update),te=he(D.update);async function ue(){const a=le(p);A.set(de(a,!0)),D.set(null);const v=await r(a);return await n(a),v}function ae(){O(K(c)),C(a=>B(a,!1)),D.set(null),N.set(!1)}function F(a){return async function(m){var P,L,x,J,ce,we,Se;const{createErrorEvent:Fe,createSubmitEvent:Pe,createSuccessEvent:ge}=mt(),ne=Pe();u==null||u.dispatchEvent(ne);const l=(L=(P=ne.onError)!==null&&P!==void 0?P:a==null?void 0:a.onError)!==null&&L!==void 0?L:t.onError,o=(J=(x=ne.onSuccess)!==null&&x!==void 0?x:a==null?void 0:a.onSuccess)!==null&&J!==void 0?J:t.onSuccess,d=(Se=(we=(ce=ne.onSubmit)!==null&&ce!==void 0?ce:a==null?void 0:a.onSubmit)!==null&&we!==void 0?we:t.onSubmit)!==null&&Se!==void 0?Se:yt(u);if(!d||(m==null||m.preventDefault(),ne.defaultPrevented))return;k.set(!0),D.set(null);const f=Ie(le(p)),$=await r(f,a==null?void 0:a.validate),pe=await n(f,a==null?void 0:a.warn);if(pe&&_.set(Je(B(f,[]),pe)),A.set(de(f,!0)),$&&(A.set(de($,!0)),Le($,R=>Array.isArray(R)?R.length>=1:!!R))){await new Promise(R=>setTimeout(R)),i().forEach(R=>{var Y;return(Y=R.onSubmitError)===null||Y===void 0?void 0:Y.call(R,{data:f,errors:$})}),k.set(!1);return}const ie={setFields:O,setData:T,setTouched:C,setErrors:S,setWarnings:Q,unsetField:z,addField:oe,resetField:me,reset:ae,setInitialValues:re.setInitialValues,moveField:ee,swapFields:V,form:u,controls:u&&Array.from(u.elements).filter(U),config:Object.assign(Object.assign({},t),a)};try{const W=await d(f,ie);u==null||u.dispatchEvent(ge(Object.assign({response:W},ie))),await(o==null?void 0:o(W,ie))}catch(W){const R=Fe(Object.assign({error:W},ie));if(u==null||u.dispatchEvent(R),!l&&!R.defaultPrevented)throw W;if(!l&&!R.errors)return;const Y=R.errors||await(l==null?void 0:l(W,ie));Y&&(A.set(de(Y,!0)),w.set(Y),await new Promise(se=>setTimeout(se)),i().forEach(se=>{var be;return(be=se.onSubmitError)===null||be===void 0?void 0:be.call(se,{data:f,errors:le(w)})}))}finally{k.set(!1)}}}const re={setData:T,setFields:O,setTouched:C,setErrors:S,setWarnings:Q,setIsSubmitting:b,setIsDirty:M,setInteracted:te,validate:ue,reset:ae,unsetField:z,resetField:me,addField:oe,swapFields:V,moveField:ee,createSubmitHandler:F,handleSubmit:F(),setInitialValues:a=>{c=ve(a)}};return{public:re,private:{_setFormNode(a){u=a},_getInitialValues:()=>c}}}function ht({helpers:e,stores:t,config:r,extender:n,createSubmitHandler:i,handleSubmit:s,_setFormNode:u,_getInitialValues:c,_setCurrentExtenders:p,_getCurrentExtenders:A}){const{setFields:w,setTouched:_,reset:N,setInitialValues:k}=e,{addValidator:D,addTransformer:T,validate:C}=e,{data:S,errors:Q,warnings:G,touched:O,isSubmitting:oe,isDirty:I,interacted:z,isValid:V,isValidating:ee}=t;function me(b){b.requestSubmit||(b.requestSubmit=s);function M(l){return function(o){return o({form:b,stage:l,controls:Array.from(b.elements).filter(U),data:S,errors:Q,warnings:G,touched:O,isValid:V,isValidating:ee,isSubmitting:oe,isDirty:I,interacted:z,config:r,addValidator:D,addTransformer:T,setFields:w,validate:C,reset:N,createSubmitHandler:i,handleSubmit:s})}}p(n.map(M("MOUNT"))),b.noValidate=!!r.validate;const{defaultData:te,defaultTouched:ue}=Xe(b);u(b),k(Je(K(te),c())),w(c()),O.set(ue);function ae(l){const o=j(l),d=Array.from(b.querySelectorAll(`[name="${l.name}"]`)).filter(f=>U(f)?o===j(f):!1);if(d.length!==0)return d.length===1?S.update(f=>E(f,j(l),l.checked)):S.update(f=>E(f,j(l),d.filter(De).filter($=>$.checked).map($=>$.value)))}function F(l){const o=b.querySelectorAll(`[name="${l.name}"]`),d=Array.from(o).find(f=>De(f)&&f.checked);S.update(f=>E(f,j(l),d==null?void 0:d.value))}function re(l){var o;const d=Array.from((o=l.files)!==null&&o!==void 0?o:[]);S.update(f=>E(f,j(l),l.multiple?d:d[0]))}function ye(l){if(!l.multiple)S.update(o=>E(o,j(l),l.value));else{const o=Array.from(l.options).filter(d=>d.selected).map(d=>d.value);S.update(d=>E(d,j(l),o))}}function a(l){const o=l.target;if(!o||!U(o)||Te(o)||Me(o)||["checkbox","radio","file"].includes(o.type)||!o.name)return;I.set(!0);const d=Ze(o);z.set(o.name),S.update(f=>E(f,j(o),d))}function v(l){const o=l.target;if(!(!o||!U(o)||Me(o))&&o.name)if(_(j(o),!0),z.set(o.name),(Te(o)||["checkbox","radio","file","hidden"].includes(o.type))&&I.set(!0),o.type==="hidden"&&S.update(d=>E(d,j(o),o.value)),Te(o))ye(o);else if(De(o))o.type==="checkbox"?ae(o):o.type==="radio"?F(o):o.type==="file"&&re(o);else return}function m(l){const o=l.target;!o||!U(o)||Me(o)||o.name&&(_(j(o),!0),z.set(o.name))}function P(l){l.preventDefault(),N()}const L={childList:!0,subtree:!0};function x(l){let o=le(S),d=le(O),f=le(Q),$=le(G);for(const pe of l.reverse()){if(pe.hasAttribute("data-felte-keep-on-remove")&&pe.dataset.felteKeepOnRemove!=="false")continue;const ie=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let W=j(pe);const R=le(O);if(ie.test(W)){const se=W.split(".").slice(0,-1).join("."),be=fe(R,se);y(be)&&Object.keys(be).length<=1&&(W=se)}o=xe(o,W),d=xe(d,W),f=xe(f,W),$=xe($,W)}S.set(o),O.set(d),Q.set(f),G.set($)}const J=Ue(()=>{A().forEach(d=>{var f;return(f=d.destroy)===null||f===void 0?void 0:f.call(d)}),p(n.map(M("UPDATE")));const{defaultData:l,defaultTouched:o}=Xe(b);S.update(d=>Be(d,l)),O.update(d=>Be(d,o)),e.setFields(le(S))},0);let ce=[];const we=Ue(()=>{A().forEach(l=>{var o;return(o=l.destroy)===null||o===void 0?void 0:o.call(l)}),p(n.map(M("UPDATE"))),x(ce),ce=[]},0);function Se(l){Array.from(l.addedNodes).some(d=>ze(d)?U(d)?!0:qe(d).length>0:!1)&&J()}function Fe(l){for(const o of l.removedNodes){if(!ze(o))continue;const d=qe(o);d.length!==0&&(ce.push(...d),we())}}function Pe(l){for(const o of l)o.type==="childList"&&(o.addedNodes.length>0&&Se(o),o.removedNodes.length>0&&Fe(o))}const ge=new MutationObserver(Pe);ge.observe(b,L),b.addEventListener("input",a),b.addEventListener("change",v),b.addEventListener("focusout",m),b.addEventListener("submit",s),b.addEventListener("reset",P);const ne=Q.subscribe(l=>{for(const o of b.elements){if(!U(o)||!o.name)continue;const d=fe(l,j(o)),f=Array.isArray(d)?d.join(`
`):typeof d=="string"?d:void 0;f!==o.dataset.felteValidationMessage&&(f?(o.dataset.felteValidationMessage=f,o.setAttribute("aria-invalid","true")):(delete o.dataset.felteValidationMessage,o.removeAttribute("aria-invalid")))}});return{destroy(){ge.disconnect(),b.removeEventListener("input",a),b.removeEventListener("change",v),b.removeEventListener("focusout",m),b.removeEventListener("submit",s),b.removeEventListener("reset",P),ne(),A().forEach(l=>{var o;return(o=l.destroy)===null||o===void 0?void 0:o.call(l)})}}}return{form:me}}function Et(e){const t={aborted:!1,priority:e};return{signal:t,abort(){t.aborted=!0}}}function wt(e,t){if(y(e))return!t||y(t)&&Object.keys(t).length===0?B(e,null):void 0;if(Array.isArray(e)){if(e.some(y))return;const r=Array.isArray(t)?t:[];return e.map((n,i)=>{const s=r[i];return Array.isArray(s)&&s.length===0?null:n&&s||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?e?t:null:e&&t?[t]:null}function St(e,t){if(y(e))return!t||y(t)&&Object.keys(t).length===0?B(e,null):void 0;if(Array.isArray(e)){if(e.some(y))return;const r=Array.isArray(t)?t:[];return e.map((n,i)=>{const s=r[i];return Array.isArray(s)&&s.length===0?null:s||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?t:t?[t]:null}function gt([e,t]){return Ee(t,e,wt)}function _t([e,t]){return Ee(t,e,St)}function Ot(e){return function(r,n,i){const s=Array.isArray(r)?r:[r],u=new Array(s.length),c=e(i),p=c.set,A=c.subscribe;let w;function _(){w=s.map((k,D)=>k.subscribe(T=>{u[D]=T,p(n(u))}))}function N(){w==null||w.forEach(k=>k())}return c.subscribe=function(D){const T=A(D);return()=>{T()}},[c,_,N]}}function kt(e,t){var r,n,i,s,u,c,p,A,w;const _=Ot(e),N=t.initialValues=t.initialValues?ve($e(K(t.initialValues),t.transform)):{},k=de(Ie(N),!1),D=e(k),T=e(0),[C,S,Q]=_([D,T],([g,h])=>Le(g,X=>!!X)&&h>=1,!1);delete C.set,delete C.update;function G(g){let h;return async function(X,Z,q,_e=!1){if(!q||!X)return;let Ae=Z&&Object.keys(Z).length>0?Z:B(X,[]);const Oe=Et(_e);if((!(h!=null&&h.signal.priority)||_e)&&(h==null||h.abort(),h=Oe),h.signal.priority&&!_e)return;T.update(Ne=>Ne+1);const Ke=ft(X,q);return Ke.forEach(async Ne=>{const tt=await Ne;Oe.signal.aborted||(Ae=ke([Ae,tt]),g.set(Ae))}),await Promise.all(Ke),h=void 0,T.update(Ne=>Ne-1),Ae}}let O=B(k,[]);const oe=e(N),I=B(k,[]),z=e(I),V=e(K(I)),[ee,me,b]=_([z,V],ke,K(I)),M=B(k,[]),te=e(M),ue=e(K(M)),[ae,F,re]=_([te,ue],ke,K(M)),[ye,a,v]=_([ee,D],gt,K(I)),[m,P,L]=_([ae,D],_t,K(M));let x=!1;const[J,ce,we]=_(ee,([g])=>{var h;return x?!Le(g,H=>Array.isArray(H)?H.length>=1:!!H):(x=!0,!t.validate&&!(!((h=t.debounced)===null||h===void 0)&&h.validate))},!t.validate&&!(!((r=t.debounced)===null||r===void 0)&&r.validate));delete J.set,delete J.update;const Se=e(!1),Fe=e(!1),Pe=e(null),ge=G(z),ne=G(te),l=G(V),o=G(ue),d=Ue(l,(u=(i=(n=t.debounced)===null||n===void 0?void 0:n.validateTimeout)!==null&&i!==void 0?i:(s=t.debounced)===null||s===void 0?void 0:s.timeout)!==null&&u!==void 0?u:300,{onInit:()=>{T.update(g=>g+1)},onEnd:()=>{T.update(g=>g-1)}}),f=Ue(o,(w=(p=(c=t.debounced)===null||c===void 0?void 0:c.warnTimeout)!==null&&p!==void 0?p:(A=t.debounced)===null||A===void 0?void 0:A.timeout)!==null&&w!==void 0?w:300);async function $(g,h){var H;const X=Ie(g),Z=ge(X,O,h??t.validate,!0);if(h)return Z;const q=l(X,O,(H=t.debounced)===null||H===void 0?void 0:H.validate,!0);return ke(await Promise.all([Z,q]))}async function pe(g,h){var H;const X=Ie(g),Z=ne(X,O,h??t.warn,!0);if(h)return Z;const q=o(X,O,(H=t.debounced)===null||H===void 0?void 0:H.warn,!0);return ke(await Promise.all([Z,q]))}let ie=I,W=M;function R(){const g=oe.subscribe(q=>{var _e,Ae;const Oe=Ie(q);ge(Oe,O,t.validate),ne(Oe,O,t.warn),d(Oe,O,(_e=t.debounced)===null||_e===void 0?void 0:_e.validate),f(Oe,O,(Ae=t.debounced)===null||Ae===void 0?void 0:Ae.warn)}),h=D.subscribe(q=>{O=B(q,[])}),H=ee.subscribe(q=>{ie=q}),X=ae.subscribe(q=>{W=q});me(),ce(),F(),a(),P(),S();function Z(){g(),v(),b(),re(),L(),we(),Q(),h(),H(),X()}return Z}function Y(g){z.set(g(ie)),V.set({})}function se(g){te.set(g(W)),ue.set({})}function be(g){Y(()=>g)}function et(g){se(()=>g)}return ye.set=be,ye.update=Y,m.set=et,m.update=se,{data:oe,errors:ye,warnings:m,touched:D,isValid:J,isSubmitting:Se,isDirty:Fe,isValidating:C,interacted:Pe,validateErrors:$,validateWarnings:pe,cleanup:t.preventStoreStart?()=>{}:R(),start:R}}function Dt(e,t){var r,n;(r=e.extend)!==null&&r!==void 0||(e.extend=[]),(n=e.debounced)!==null&&n!==void 0||(e.debounced={}),e.validate&&!Array.isArray(e.validate)&&(e.validate=[e.validate]),e.debounced.validate&&!Array.isArray(e.debounced.validate)&&(e.debounced.validate=[e.debounced.validate]),e.transform&&!Array.isArray(e.transform)&&(e.transform=[e.transform]),e.warn&&!Array.isArray(e.warn)&&(e.warn=[e.warn]),e.debounced.warn&&!Array.isArray(e.debounced.warn)&&(e.debounced.warn=[e.debounced.warn]);function i(F,{debounced:re,level:ye}={debounced:!1,level:"error"}){var a;const v=ye==="error"?"validate":"warn";(a=e.debounced)!==null&&a!==void 0||(e.debounced={});const m=re?e.debounced:e;m[v]?m[v]=[...m[v],F]:m[v]=[F]}function s(F){e.transform?e.transform=[...e.transform,F]:e.transform=[F]}const u=Array.isArray(e.extend)?e.extend:[e.extend];let c=[];const p=()=>c,A=F=>{c=F},{isSubmitting:w,isValidating:_,data:N,errors:k,warnings:D,touched:T,isValid:C,isDirty:S,cleanup:Q,start:G,validateErrors:O,validateWarnings:oe,interacted:I}=kt(t.storeFactory,e),z=N.update,V=N.set,ee=F=>z(re=>ve($e(F(re),e.transform))),me=F=>V(ve($e(F,e.transform)));N.update=ee,N.set=me;const b=At({extender:u,config:e,addValidator:i,addTransformer:s,validateErrors:O,validateWarnings:oe,_getCurrentExtenders:p,stores:{data:N,errors:k,warnings:D,touched:T,isValid:C,isValidating:_,isSubmitting:w,isDirty:S,interacted:I}}),{createSubmitHandler:M,handleSubmit:te}=b.public;c=u.map(F=>F({stage:"SETUP",errors:k,warnings:D,touched:T,data:N,isDirty:S,isValid:C,isValidating:_,isSubmitting:w,interacted:I,config:e,addValidator:i,addTransformer:s,setFields:b.public.setFields,reset:b.public.reset,validate:b.public.validate,handleSubmit:te,createSubmitHandler:M}));const ue=Object.assign({config:e,stores:{data:N,touched:T,errors:k,warnings:D,isSubmitting:w,isValidating:_,isValid:C,isDirty:S,interacted:I},createSubmitHandler:M,handleSubmit:te,helpers:Object.assign(Object.assign({},b.public),{addTransformer:s,addValidator:i}),extender:u,_getCurrentExtenders:p,_setCurrentExtenders:A},b.private),{form:ae}=ht(ue);return Object.assign({data:N,errors:k,warnings:D,touched:T,isValid:C,isSubmitting:w,isValidating:_,isDirty:S,interacted:I,form:ae,cleanup:Q,startStores:G},b.public)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Tt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Nt(e){const t=Dt(e??{},{storeFactory:rt}),{cleanup:r,startStores:n}=t,i=Tt(t,["cleanup","startStores"]);return nt(r),i}export{Nt as c};
