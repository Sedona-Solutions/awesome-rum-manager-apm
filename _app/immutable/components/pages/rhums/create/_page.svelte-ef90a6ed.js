import{V as ae,S as ue,i as le,s as oe,k as O,q as C,a as M,l as N,m as T,r as B,h as E,c as I,n as A,b as J,K as h,W as j,X as x,Y as ce,B as Z,D as fe,T as z,Z as de}from"../../../../chunks/index-1bc003d2.js";import{r as G}from"../../../../chunks/rhum-738b587b.js";import{w as q,d as H}from"../../../../chunks/index-9b3b7788.js";var Q=Object.prototype.hasOwnProperty;function K(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&K(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(Q.call(e,r)&&++n&&!Q.call(t,r)||!(r in t)||!K(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}function pe(e){return new Promise(t=>{e.subscribe(t)()})}function he(e,t,r){e.update(n=>(ne(n,t,r),n))}function me(e){return JSON.parse(JSON.stringify(e))}function Y(e){return e==null}function ee(e){return Y(e)||Object.keys(e).length<=0}function te(e){let t=[];for(const[,r]of Object.entries(e)){const n=typeof r=="object"?te(r):[r];t=[...t,...n]}return t}function W(e,t,r={}){for(const n in t)switch(!0){case(t[n].type==="object"&&!ee(t[n].fields)):{r[n]=W(e[n],t[n].fields,{...r[n]});break}case t[n].type==="array":{const c=e&&e[n]?e[n]:[];r[n]=c.map(l=>{const i=W(l,t[n].innerType.fields,{...r[n]});return Object.keys(i).length>0?i:""});break}default:r[n]=""}return r}const ge=K;function X(e,t){if(Array.isArray(e))return e.map(n=>X(n,t));const r={};for(const n in e)r[n]=typeof e[n]=="object"&&!Y(e[n])?X(e[n],t):t;return r}function ne(e,t,r){if(new Object(e)!==e)return e;Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]);const n=t.slice(0,-1).reduce((c,l,i)=>new Object(c[l])===c[l]?c[l]:c[l]=Math.trunc(Math.abs(t[i+1]))===+t[i+1]?[]:{},e);return n[t[t.length-1]]=r,e}const p={assignDeep:X,cloneDeep:me,deepEqual:ge,getErrorsFromSchema:W,getValues:te,isEmpty:ee,isNullish:Y,set:ne,subscribeOnce:pe,update:he},$="",ye=!0;function be(e){return e.getAttribute&&e.getAttribute("type")==="checkbox"}function ve(e){return e.getAttribute&&e.getAttribute("type")==="file"}function _e(e){return ve(e)?e.files:be(e)?e.checked:e.value}const Ee=e=>{let t=e.initialValues||{};const r=e.validationSchema,n=e.validate,c=e.onSubmit,l={values:()=>p.cloneDeep(t),errors:()=>r?p.getErrorsFromSchema(t,r.fields):p.assignDeep(t,$),touched:()=>p.assignDeep(t,!ye)},i=q(l.values()),f=q(l.errors()),b=q(l.touched()),g=q(!1),u=q(!1),k=H(f,s=>p.getValues(s).every(o=>o===$)),v=H(i,s=>{const a=p.assignDeep(s,!1);for(let o in s)a[o]=!p.deepEqual(s[o],t[o]);return a}),V=H(v,s=>p.getValues(s).includes(!0));function P(s){return p.subscribeOnce(i).then(a=>y(s,a[s]))}function y(s,a){return m(s,!0),r?(u.set(!0),r.validateAt(s,ae(i)).then(()=>p.update(f,s,"")).catch(o=>p.update(f,s,o.message)).finally(()=>{u.set(!1)})):n?(u.set(!0),Promise.resolve().then(()=>n({[s]:a})).then(o=>p.update(f,s,p.isNullish(o)?"":o[s])).finally(()=>{u.set(!1)})):Promise.resolve()}function D(s,a){return d(s,a),y(s,a)}function S(s){const a=s.target,o=a.name||a.id,_=_e(a);return D(o,_)}function R(s){return s&&s.preventDefault&&s.preventDefault(),g.set(!0),p.subscribeOnce(i).then(a=>typeof n=="function"?(u.set(!0),Promise.resolve().then(()=>n(a)).then(o=>{if(p.isNullish(o)||p.getValues(o).length===0)return F(a);f.set(o),g.set(!1)}).finally(()=>u.set(!1))):r?(u.set(!0),r.validate(a,{abortEarly:!1}).then(()=>F(a)).catch(o=>{if(o&&o.inner){const _=l.errors();o.inner.map(U=>p.set(_,U.path,U.message)),f.set(_)}g.set(!1)}).finally(()=>u.set(!1))):F(a))}function w(){i.set(l.values()),f.set(l.errors()),b.set(l.touched())}function F(s){return Promise.resolve().then(()=>f.set(l.errors())).then(()=>c(s,i,f)).finally(()=>g.set(!1))}function d(s,a){p.update(i,s,a)}function m(s,a){p.update(b,s,a)}function L(s){t=s,w()}return{form:i,errors:f,touched:b,modified:v,isValid:k,isSubmitting:g,isValidating:u,isModified:V,handleChange:S,handleSubmit:R,handleReset:w,updateField:d,updateValidateField:D,updateTouched:m,validateField:P,updateInitialValues:L,state:H([i,f,b,v,k,u,g,V],([s,a,o,_,U,se,re,ie])=>({form:s,errors:a,touched:o,modified:_,isValid:U,isSubmitting:re,isValidating:se,isModified:ie}))}};function Se(e){let t,r,n,c,l,i,f,b,g,u,k,v,V,P,y,D,S,R,w,F;return{c(){t=O("h1"),r=C("New Rhum "),n=O("a"),c=C("Back to list"),l=M(),i=O("form"),f=O("label"),b=C("Name"),g=M(),u=O("input"),k=M(),v=O("label"),V=C("Note"),P=M(),y=O("input"),D=M(),S=O("button"),R=C("Create"),this.h()},l(d){t=N(d,"H1",{});var m=T(t);r=B(m,"New Rhum "),n=N(m,"A",{class:!0,href:!0});var L=T(n);c=B(L,"Back to list"),L.forEach(E),m.forEach(E),l=I(d),i=N(d,"FORM",{class:!0});var s=T(i);f=N(s,"LABEL",{});var a=T(f);b=B(a,"Name"),a.forEach(E),g=I(s),u=N(s,"INPUT",{type:!0,name:!0}),k=I(s),v=N(s,"LABEL",{});var o=T(v);V=B(o,"Note"),o.forEach(E),P=I(s),y=N(s,"INPUT",{type:!0,name:!0}),D=I(s),S=N(s,"BUTTON",{type:!0});var _=T(S);R=B(_,"Create"),_.forEach(E),s.forEach(E),this.h()},h(){A(n,"class","btn btn-primary"),A(n,"href","/rhums"),A(u,"type","text"),A(u,"name","name"),A(y,"type","text"),A(y,"name","note"),A(S,"type","submit"),A(i,"class","content")},m(d,m){J(d,t,m),h(t,r),h(t,n),h(n,c),J(d,l,m),J(d,i,m),h(i,f),h(f,b),h(i,g),h(i,u),j(u,e[0].name),h(i,k),h(i,v),h(v,V),h(i,P),h(i,y),j(y,e[0].note),h(i,D),h(i,S),h(S,R),w||(F=[x(u,"input",e[3]),x(y,"input",e[4]),x(i,"submit",ce(e[2]))],w=!0)},p(d,[m]){m&1&&u.value!==d[0].name&&j(u,d[0].name),m&1&&y.value!==d[0].note&&j(y,d[0].note)},i:Z,o:Z,d(d){d&&E(t),d&&E(l),d&&E(i),w=!1,fe(F)}}}function Oe(e,t,r){let n,c;z(e,G,u=>r(5,n=u));const{form:l,handleChange:i,handleSubmit:f}=Ee({initialValues:{name:"",note:""},onSubmit:u=>{de(G,n=[...n,Object.assign({id:n.length+1},u)],n)}});z(e,l,u=>r(0,c=u));function b(){c.name=this.value,l.set(c)}function g(){c.note=this.value,l.set(c)}return[c,l,f,b,g]}class Ve extends ue{constructor(t){super(),le(this,t,Oe,Se,oe,{})}}export{Ve as default};
